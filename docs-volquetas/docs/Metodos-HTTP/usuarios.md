---
hide:
    - toc
---

## Usuarios:

| Método HTTP | Endpoint                                 | Descripción                                       | Parámetros (Body/Query/Path)                                                                                                             | Respuesta Exitosa                                                                                                | Respuesta de Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Token de Login   |
| ----------- | ---------------------------------------- | ------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- |
| POST        | /api/usuarios                            | Crea un nuevo usuario                             | **Body:** <br>`rol` (string), `email` (string), `password` (string), `confirmPassword` (string), `empleadoId` (integer)                  | 201 Created <br>`{ "id": <id>, "email": <email>, "empleadoId": <empleadoId>, "rol": <rol>, "activo": <activo> }` | 400 Bad Request<br>`{ "error": "Todos los campos son obligatorios" }` <br>`{ "error": "La contraseña no es suficientemente fuerte" }` <br>`{ "error": "Email inválido" }` <br>`{ "error": "Las contraseñas no coinciden" }` <br>`{ "error": "Rol inválido" }` <br>`{ "error": "Empleado no existe" }` <br>500 Internal Server Error <br>`{ "error": "Error al crear usuario", "detalle": <detalles> }`                                                                                                                                                            | No Requerido     |
| GET         | /api/usuarios                            | Obtiene todos los usuarios                        | \-                                                                                                                                       | 200 OK <br>`[ { ...usuario1 }, { ...usuario2 }, ... ]`                                                           | 500 Internal Server Error <br>`{ "error": "Error al obtener usuarios", "detalle": <detalles> }`                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Requerido(Admin) |
| GET         | /api/usuarios/:id                        | Obtiene un usuario por ID                         | **Path:** <br>`usuarioId` (integer)                                                                                                      | 200 OK <br>`{ ...usuario }`                                                                                      | 404 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>500 Internal Server Error <br>`{ "error": "Error al obtener usuario", "detalle": <detalles> }`                                                                                                                                                                                                                                                                                                                                                                                                       | Requerido        |
| GET         | /api/usuarios/inactivos                  | Obtiene todos los usuarios inactivos              | \-                                                                                                                                       | 200 OK <br>`[ { ...usuario1 }, { ...usuario2 }, ... ]`                                                           | 500 Internal Server Error <br>`{ "error": "Error al obtener usuarios", "detalle": <detalles> }`                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Requerido(Admin) |
| POST        | /api/usuarios/login                      | Loguea un usuario y devuelve un token JWT         | **Body:** <br>`email` (string), `password` (string)                                                                                      | 200 OK <br>`{ "token": <token> }`                                                                                | 400 Bad Request <br>`{ "error": "Email y contraseña son obligatorios" }` <br>401 Unauthorized <br>`{ "error": "Credenciales inválidas" }` <br>`403 Forbidden` <br>`{ "error": "Usuario no activado" }` <br>500 Internal Server Error <br>`{ "error": "Error al loguear usuario", "detalle": <detalles> }`                                                                                                                                                                                                                                                         | No Requerido     |
| POST        | /api/usuarios/confirmar                  | Confirma un usuario mediante email                | **Body:** <br>`email` (string)                                                                                                           | `202 Accepted` <br>`{ "detalle": "Usuario con mail: <email> activado exitosamente" }`                            | 400 Bad Request <br>`{ "error": "Email es obligatorio" }` <br>400 Not Found <br>`{ "error": "Usuario con ese mail no existe" }` <br>400 Bad Request <br>`{ "error": "Usuario ya esta activado" }` <br>500 Internal Server Error <br>`{ "error": "Error al confirmar usuario", "detalle": <detalles> }`                                                                                                                                                                                                                                                            | Requerido(Admin) |
| DELETE      | /api/usuarios/:id                        | Borra un usuario por ID                           | **Path:** <br>`usuarioId` (integer)                                                                                                      | 200 OK <br>`{ "detalle": "Usuario borrado exitosamente" }`                                                       | 400 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>500 Internal Server Error <br>`{ "error": "Error al borrar usuario", "detalle": <detalles> }`                                                                                                                                                                                                                                                                                                                                                                                                        | Requerido(Admin) |
| PUT         | /api/usuarios/:id                        | Modifica un usuario por ID                        | **Path:** <br>`usuarioId` (integer) <br>**Body:** <br>`rol` (string, optional), `email` (string, optional), `activo` (boolean, optional) | 200 OK <br>`{ ...req.body }`                                                                                     | 400 Bad Request <br>`{ "error": "Email inválido" }` <br>400 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>500 Internal Server Error <br>`{ "error": "Error al modificar usuario", "detalle": <detalles> }`                                                                                                                                                                                                                                                                                                                                             | Requerido(Admin) |
| PUT         | /api/usuarios-contrasenia                | Cambia la contraseña del usuario actual           | **Body:** <br>`email` (string), `oldPassword` (string), `newPassword` (string), `confirmNewPassword` (string)                            | 200 OK <br>`{ "message": "Contraseña actualizada exitosamente" }`                                                | 400 Bad Request <br>`{ "error": "Todos los campos son obligatorios" }` <br>`{ "error": "Email inválido" }` <br>`{ "error": "Las contraseñas no coinciden" }` <br>`{ "error": "La contraseña anterior y la nueva deben ser distintas" }` <br>`{ "error": "La nueva contraseña no es suficientemente fuerte" }` <br>400 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>401 Unauthorized <br>`{ "error": "La contraseña antigua es incorrecta" }` <br>500 Internal Server Error <br>`{ "error": "Error al cambiar la contraseña", "detalle": <detalles> }` | Requerido        |
| PUT         | /api/usuarios/usuarios-contrasenia-admin | Cambia la contraseña de otro usuario siendo admin | **Body:** <br>`email` (string), `newPassword` (string), `confirmNewPassword` (string)                                                    | 200 OK <br>`{ "message": "Contraseña actualizada exitosamente" }`                                                | 400 Bad Request <br>`{ "error": "Todos los campos son obligatorios" }` <br>`{ "error": "Email inválido" }` <br>`{ "error": "Las contraseñas no coinciden" }` <br>`{ "error": "La nueva contraseña no es suficientemente fuerte" }` <br>400 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>500 Internal Server Error <br>`{ "error": "Error al cambiar la contraseña", "detalle": <detalles> }`                                                                                                                                                          | Requerido(Admin) |
