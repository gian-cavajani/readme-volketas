---
hide:
    - toc
---

## Obras:

| Método HTTP | Endpoint                 | Descripción                               | Parámetros (Body/Query/Path)                                                                                                                                                                                                                | Respuesta Exitosa                                                         | Respuesta de Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Token de Login   |
| ----------- | ------------------------ | ----------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- |
| POST        | /api/obras               | Crea una nueva obra                       | Body: `dias`, `destinoFinal`, `calle`, `esquina`, `barrio`, `coordenadas`, `numeroPuerta`, `descripcion`, `detalleResiduos`, `residuosMezclados`, `residuosReciclados`, `frecuenciaSemanal`, `particularId`, `empresaId`                    | 201 Created: `{ obra, obraDetalles }`                                     | 400 Bad Request: `{ error: 'La calle es obligatoria' }` <br>400 Bad Request: `{ error: 'La Obra debe pertenecer exclusivamente a una empresa o a un particular' }` <br>400 Bad Request: `{ error: 'Ese Particular no existe' }` <br>400 Bad Request: `{ error: 'Esa Empresa no existe' }` <br>500 Internal Server Error: `{ error: 'Error al crear la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al crear la obra', detalle: [error details], stack: [stack trace] }` | Requerido        |
| GET         | /api/obras               | Obtiene todas las obras                   | \-                                                                                                                                                                                                                                          | 200 OK: `[ obra1, obra2, ... ]`                                           | 500 Internal Server Error: `{ error: 'Error al obtener las obras', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al obtener las obras', detalle: [error details], stack: [stack trace] }`                                                                                                                                                                                                                                                                                       | Requerido        |
| GET         | /api/obras/:id           | Obtiene una obra por ID                   | Path: `obraId` <br>Query: `detalle` (opcional, valores posibles: 'si')                                                                                                                                                                      | 200 OK: `{ obra }`                                                        | 404 Not Found: `{ error: 'Obra no encontrada' }` <br>500 Internal Server Error: `{ error: 'Error al obtener la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al obtener la obra', detalle: [error details], stack: [stack trace] }`                                                                                                                                                                                                                                      | Requerido        |
| GET         | /api/obras-ultimos-meses | Obtiene obras con pedidos recientes       | Query: `cantidadMeses`                                                                                                                                                                                                                      | 200 OK: `[ obra1, obra2, ... ]`                                           | 400 Bad Request: `{ error: 'La cantidad de meses debe ser mayor a 0' }` <br>500 Internal Server Error: `{ error: 'Error al obtener obras con pedidos recientes', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al obtener obras con pedidos recientes', detalle: [error details] }`                                                                                                                                                                                             | Requerido        |
| PUT         | /api/obras/:id           | Actualiza una obra por ID                 | Path: `obraId` <br>Body: `dias`, `destinoFinal`, `calle`, `esquina`, `barrio`, `coordenadas`, `numeroPuerta`, `descripcion`, `detalleResiduos`, `residuosMezclados`, `residuosReciclados`, `frecuenciaSemanal`, `particularId`, `empresaId` | 200 OK: `{ updatedObra }`                                                 | 404 Not Found: `{ error: 'Obra no encontrada' }` <br>500 Internal Server Error: `{ error: 'Error al actualizar la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al actualizar la obra', detalle: [error details], stack: [stack trace] }`                                                                                                                                                                                                                                | Requerido        |
| PUT         | /api/obras-detalle/:id   | Actualiza los detalles de una obra por ID | Path: `obraId` <br>Body: `detalleResiduos`, `residuosMezclados`, `residuosReciclados`, `destinoFinal`, `dias`, `frecuenciaSemanal`                                                                                                          | 200 OK: `{ updatedObra }`                                                 | 404 Not Found: `{ error: 'Obra no encontrada' }` <br>500 Internal Server Error: `{ error: 'Error al actualizar los detalles de la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al actualizar los detalles de la obra', detalle: [error details], stack: [stack trace] }`                                                                                                                                                                                                | Requerido        |
| DELETE      | /api/obras/:id           | Elimina una obra por ID                   | Path: `obraId`                                                                                                                                                                                                                              | 200 OK: `{ detalle: 'Obra en la calle [calle] eliminada correctamente' }` | 404 Not Found: `{ error: 'La Obra no existe' }` <br>500 Internal Server Error: `{ error: 'Error al eliminar la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al eliminar la obra', detalle: [error details], stack: [stack trace] }`                                                                                                                                                                                                                                     | Requerido(Admin) |
