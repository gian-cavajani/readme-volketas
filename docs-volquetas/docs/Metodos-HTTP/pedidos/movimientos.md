---
hide:
    - toc
---

## Movimientos:

| Método HTTP | Endpoint          | Descripción                      | Parámetros (Body/Query/Path)                                                                                                                                                                                                    | Respuesta Exitosa                                                               | Respuesta de Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Token de login |
| ----------- | ----------------- | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| POST        | /api/movimientos  | Crea un nuevo movimiento         | **Body**: <br>`pedidoId` (string) <br>`tipo` (string, uno de: entrega, levante) <br>`numeroVolqueta` (string, opcional) <br>`choferId` (string) <br>`horario` (string)                                                          | 201 Created <br>`{ id, pedidoId, tipo, numeroVolqueta, choferId, horario }`     | 400 Bad Request <br>`{ error: 'Tipo solo puede ser "entrega" o "levante"' }` <br>`{ error: 'Movimiento debe tener Chofer' }` <br>`{ error: 'Movimiento debe tener Pedido' }` <br>`{ error: 'Movimiento debe tener horario' }` <br>`{ error: 'Volqueta no existe' }` <br>`{ error: 'Dado el estado de la volqueta (estado), esta no se puede utilizar' }` <br>`{ error: 'Id de Chofer no es válido' }` <br>`{ error: 'Id de Chofer no es válido, Empleado no es chofer' }` <br>`{ error: 'Para crear la entrega el pedido no debe tener movimientos' }` <br>`{ error: 'Volqueta esta siendo utilizada en otro lugar' }` <br>`{ error: 'Para crear el levante el pedido debe tener 1 movimiento(Entrega)' }` <br>`{ error: 'Volqueta del levante debe ser la misma que la de la entrega' }` <br>`{ error: 'El horario del levante debe ser después de la entrega' }` <br>`{ error: 'Para asignar volqueta al levante, la entrega debe tener una' }` <br>`{ error: 'Pedido no existe' }` <br>500 Internal Server Error <br>`{ error: 'Error al crear el movimiento', detalle: 'Descripción del error' }` <br>`{ error: 'Error al crear el movimiento', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido      |
| PUT         | /api/movimientos/ | Modifica un movimiento existente | **Path**: <br>`movimientoId` (integer) <br>**Body**: <br>`horario` (string, opcional) <br>`pedidoId` (string, opcional) <br>`tipo` (string, opcional) <br>`numeroVolqueta` (string, opcional) <br>`choferId` (string, opcional) | 200 OK <br>`{ id, horario, pedidoId, tipo, numeroVolqueta, choferId }`          | 400 Bad Request <br>`{ error: 'El Tipo o el Pedido de movimiento no son modificables' }` <br>`{ error: 'Debe incluir algún campo válido a modificar (chofer, horario, número de volqueta)' }` <br>`{ error: 'No existe movimiento' }` <br>`{ error: 'horario de levante debe ser después del de entrega' }` <br>`{ error: 'horario de entrega debe ser antes del de levante' }` <br>`{ error: 'Id de Chofer sugerido no es válido' }` <br>`{ error: 'Id de Chofer sugerido no es válido, Empleado no es chofer' }` <br>500 Internal Server Error <br>`{ error: 'Error al modificar el movimiento', detalle: 'Descripción del error' }` <br>`{ error: 'Error al modificar el movimiento', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Requerido      |
| GET         | /api/movimientos  | Obtiene todos los movimientos    |                                                                                                                                                                                                                                 | 200 OK <br>`[ { id, pedidoId, tipo, numeroVolqueta, choferId, horario }, ... ]` | 500 Internal Server Error <br>`{ error: 'Error al obtener movimientos', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener movimientos', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Requerido      |
| DELETE      | /api/movimientos/ | Elimina un movimiento existente  | **Path**: <br>`movimientoId` (integer)                                                                                                                                                                                          | 200 OK <br>`{ detalle: 'Movimiento eliminado exitosamente' }`                   | 400 Not Found <br>`{ error: 'No existe movimiento' }` <br>400 Bad Request <br>`{ error: 'Debe eliminar el levante primero' }` <br>`{ error: 'Movimiento eliminado, Pero la Volqueta de este pedido está siendo utilizada en algún otro lugar. Volqueta no puede ser usada en dos pedidos a la vez (Elimine la entrega o modifique su volqueta)' }` <br>500 Internal Server Error <br>`{ error: 'Error al eliminar el movimiento', detalle: 'Descripción del error' }` <br>`{ error: 'Error al eliminar el movimiento', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Requerido      |
