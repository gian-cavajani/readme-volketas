---
hide:
    - toc
---
## Pedidos:

| Método HTTP      | Endpoint                | Descripción                                     | Parámetros (Body/Query/Path)                                                                                                                    | Respuesta Exitosa                                                                                                  | Respuesta de Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Token de Login |
| ---------------- | ----------------------- | ----------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| POST             | /api/pedidos/nuevo      | Crea un pedido nuevo con entrega y levante      | `obraId`, `descripcion`, `permisoId`, `referenciaId`, `cantidadMultiple`, `precio`, `pagado`, `tipoPago`, `horarioSugerido`, `choferSugeridoId` | 201 Created <br>`{ nuevaSugerencia, nuevoPedido, nuevoPago }`                                                      | 500 Internal Server Error <br>`{ error: 'Error al crear el pedido', detalle: error.message }` <br>o <br>`{ error: 'Error al crear el pedido', detalle: [error.errors], stack: error.stack.message }`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Requerido      |
| POST             | /api/pedidos/recambio   | Crea un pedido nuevo como recambio              | `obraId`, `descripcion`, `permisoId`, `referenciaId`, `cantidadMultiple`, `precio`, `pagado`, `tipoPago`, `horarioSugerido`, `choferSugeridoId` | 201 Created <br>`{ nuevaSugerencia, nuevoPedido, nuevoPago }`                                                      | 500 Internal Server Error <br>`{ error: 'Error al crear el pedido', detalle: error.message }` <br>o <br>`{ error: 'Error al crear el pedido', detalle: [error.errors], stack: error.stack.message }`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Requerido      |
| POST             | /api/pedidos/multiple   | Crea varios pedidos                             | `obraId`, `descripcion`, `permisoId`, `referenciaId`, `cantidadMultiple`, `precio`, `pagado`, `tipoPago`, `horarioSugerido`, `choferSugeridoId` | 201 Created <br>`{ nuevaSugerencia, nuevoPedido, nuevoPago }`                                                      | 500 Internal Server Error <br>`{ error: 'Error al crear los pedidos', detalle: error.message }` <br>o <br>`{ error: 'Error al crear los pedidos', detalle: [error.errors], stack: error.stack.message }`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Requerido      |
| GET(Desactivado) | /api/pedidos            | Obtiene todos los pedidos                       | \-                                                                                                                                              | 200 OK <br>`{ pagoPedidos, pedidos, sugerencias, movimientos }`                                                    | 500 Internal Server Error <br>`{ error: 'Error al obtener pedidos', detalle: error.message }` <br>o <br>`{ error: 'Error al obtener pedidos', detalle: [error.errors], stack: error.stack }`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Requerido      |
| GET              | /api/pedidos/multiples/ | Obtiene los pedidos múltiples de un pedido base | `pedidoId` (Path)                                                                                                                               | 200 OK <br>`[ { id, estado }, ... ]`                                                                               | 400 Bad Request <br>`{ error: 'Id de pedido incorrecto, pedido debe existir y ser multiple' }` <br>o <br>500 Internal Server Error <br>`{ error: 'Error al obtener pedidos multiples', detalle: error.message }` <br>o <br>`{ error: 'Error al obtener pedidos multiples', detalle: [error.errors], stack: error.stack.toString() }`                                                                                                                                                                                                                                                                                                                                                         | Requerido      |
| GET              | /api/pedidos/filtro     | Obtiene pedidos con filtros específicos         | `ultimos`, `estado`, `pagado`, `fechaInicio`, `fechaFin`, `empresaId`, `particularId`, `tipoHorario`, `obraId`, `choferId`, `choferSugeridoId`  | 200 OK <br>`[ { id, createdAt, descripcion, estado, creadoComo, pagoPedido, obra, movimiento, sugerencia }, ... ]` | 400 Bad Request <br>`{ error: 'No se pueden traer mas de 50 Pedidos a la vez' }` <br>o <br>`{ error: "Los tipos de horario solo pueden ser: ('movimientoEntrega', 'movimientoLevante', 'sugerenciaEntrega', 'sugerenciaLevante', 'creacion')" }` <br>o <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>o <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>o <br>`{ error: "Los tipos de estado de pedidos solo pueden ser: ('cancelado', 'iniciado', 'entregado', 'levantado')" }` <br>o <br>`{ error: 'Error al obtener pedido', detalle: error.message }` <br>o <br>`{ error: 'Error al obtener pedido', detalle: [error.errors], stack: error.stack }` | Requerido      |
| GET              | /api/pedidos/:id        | Obtiene un pedido por ID                        | `pedidoId` (Path)                                                                                                                               | 200 OK <br>`{ id, descripcion, estado, creadoComo, pagoPedido, sugerencias, movimientos, obra }`                   | 400 Not Found <br>`{ error: 'Error al obtener pedido', detalle: 'Pedido no existe' }` <br>o <br>`{ error: 'Error al obtener pedido', detalle: error.message }` <br>o <br>`{ error: 'Error al obtener pedido', detalle: [error.errors], stack: error.stack }`                                                                                                                                                                                                                                                                                                                                                                                                                                 | Requerido      |
| PUT              | /api/pedidos/:id        | Modifica un pedido                              | `pedidoId` (Path), `descripcion`, `nroPesada`, `obraId` (Body)                                                                                  | 200 OK <br>`{ id, descripcion, nroPesada, obraId }`                                                                | 400 Not Found <br>`{ error: 'Pedido no existe' }` <br>o <br>`{ error: 'Obra no existe' }` <br>o <br>`{ error: 'Obra no esta activa' }` <br>o <br>`{ error: 'Obra y Permiso tienen diferente Cliente vinculado, El permiso puede ser el vigente de Volketas 10 o propio del particular' }` <br>o <br>`{ error: 'Obra y Permiso tienen diferente Empresa vinculada' }`                                                                                                                                                                                                                                                                                                                         | Requerido      |

| Método HTTP | Endpoint                       | Descripción                               | Parámetros (Body/Query/Path)                                                                                                    | Respuesta Exitosa             | Respuesta de Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Token de Login |
| ----------- | ------------------------------ | ----------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| PATCH       | /api/pedidos-permiso/:pedidoId | Modifica el permiso asociado a un pedido. | **Path:** `pedidoId` - ID del pedido. <br>**Body:** `permisoId` - ID del permiso a asociar (o `null` para eliminar el permiso). | 202 Accepted <br>`{ pedido }` | **404 Not Found** <br>`{ error: 'Pedido no existe' }` <br>**400 Bad Request** <br>`{ error: 'Permiso no existe' }` <br>`{ error: 'Permiso Vencido, antes de la creacion del pedido' }` <br>`{ error: 'Obra y Permiso tienen diferente particular vinculado' }` <br>`{ error: 'Obra y Permiso tienen diferente Empresa vinculada' }` <br>**500 Internal Server Error** <br>`{ error: 'Error al modificar el permiso del pedido', detalle: [mensaje de error] }` <br>`{ error: 'Error al modificar el permiso del pedido', detalle: [mensaje de error], stack: [mensaje de stack] }` | Requerido      |

| DELETE | /api/pedidos/:pedidoId | Elimina un pedido. | **Path :** `pedidoId` - ID del pedido a eliminar. | 200 OK <br>`{ detalle: 'Pedido cancelado exitosamente' }` | **404 Not Found** <br>`{ error: 'Pedido no encontrado' }` <br>**400 Bad Request** <br>`{ error: 'Error al cancelar el Pedido, tiene movimientos vinculados' }` <br>`{ error: 'Error al cancelar el Pedido, El pedido tiene una factura vinculada' }` <br>`{ error: 'Error al cancelar el Pedido, El pedido fue pagado' }` <br>**500 Internal Server Error** <br>`{ error: 'Error al eliminar el pedido', detalle: [mensaje de error] }` <br>`{ error: 'Error al eliminar el pedido', detalle: [mensaje de error], stack: [mensaje de stack] }` | Requerido |
| ------ | ---------------------- | ------------------ | ------------------------------------------------- | --------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |
