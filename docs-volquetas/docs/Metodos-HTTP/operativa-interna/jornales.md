---
hide:
    - toc
---
## Jornales y Datos:

| Método HTTP | Endpoint                                                 | Descripción                                                                        | Parámetros (Body/Query/Path)                                                                                                                                                                                                       | Respuesta Exitosa                                                                                                                  | Respuesta de Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Token de Login   |
| ----------- | -------------------------------------------------------- | ---------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- |
| POST        | /api/jornales                                            | Crea un nuevo jornal                                                               | **Body**: <br>`empleadoId` (string) <br>`fecha` (string) <br>`entrada` (string, opcional) <br>`salida` (string, opcional) <br>`tipo` (string, uno de: trabajo, licencia, enfermedad, falta)                                        | 201 Created <br>`{ id, empleadoId, fecha, entrada, salida, tipo, creadoPor }`                                                      | 400 Bad Request <br>`{ error: 'El empleadoId es obligatorio' }` <br>`{ error: 'Tipo inválido' }` <br>`{ error: 'La fecha es obligatoria y debe ser válida' }` <br>`{ error: 'La hora de entrada es obligatoria y debe ser un string' }` <br>`{ error: 'La hora de salida es obligatoria y debe ser un string' }` <br>`{ error: 'Ya existe un jornal para este empleado en la fecha especificada' }` <br>500 Internal Server Error <br>`{ error: 'Error al crear el jornal', detalle: 'Descripción del error' }` <br>`{ error: 'Error al crear el jornal', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido        |
| DELETE      | /api/jornales/                                           | Borra un jornal existente                                                          | **Path**: <br>`jornalId` (integer)                                                                                                                                                                                                 | 200 OK <br>`{ message: 'Jornal borrado exitosamente' }`                                                                            | 400 Not Found <br>`{ error: 'Jornal no encontrado' }` <br>500 Internal Server Error <br>`{ error: 'Error al borrar el jornal', detalle: 'Descripción del error' }` <br>`{ error: 'Error al borrar el jornal', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                                                                                                                                                                                                                                             | Requerido(Admin) |
| PUT         | /api/jornales/:id                                        | Edita un jornal existente                                                          | **Path**: <br>`jornalId` (integer) <br>**Body**: <br>`empleadoId` (string) <br>`fecha` (string) <br>`entrada` (string, opcional) <br>`salida` (string, opcional) <br>`tipo` (string, uno de: trabajo, licencia, enfermedad, falta) | 200 OK <br>`{ id, empleadoId, fecha, entrada, salida, tipo }`                                                                      | 400 Not Found <br>`{ error: 'Jornal no encontrado' }` <br>400 Bad Request <br>`{ error: 'Ya existe un jornal para este empleado en esta fecha' }` <br>500 Internal Server Error <br>`{ error: 'Error al editar el jornal', detalle: 'Descripción del error' }` <br>`{ error: 'Error al editar el jornal', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                                                                                                                                                 | Requerido        |
| GET         | /api/jornales/                                           | Obtiene un jornal específico                                                       | **Path**: <br>`jornalId` (integer)                                                                                                                                                                                                 | 200 OK <br>`{ id, empleadoId, fecha, entrada, salida, tipo }`                                                                      | 400 Not Found <br>`{ error: 'Jornal no encontrado' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener el jornal', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener el jornal', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                                                                                                                                                                                                                                           | Requerido        |
| GET         | /api/jornales/:empleadoId/:fechaInicio/:fechaFin<br><br> | Obtiene los jornales y movimientos de un empleado en un rango de fechas            | **Path**: <br>`empleadoId` (integer) <br>`fechaInicio` (string) <br>`fechaFin` (string) <br>**Query**: <br>`empleadoId`, `fechaInicio`, `fechaFin`                                                                                 | 200 OK <br>`[ { id, fecha, tipo, horas, horasExtra, entrada, salida, entregas, levantes, viajes }, ... ]`                          | 400 Bad Request <br>`{ error: 'Empleado no existe' }` <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>`{ error: 'Las fechas proporcionadas no son válidas' }` <br>`{ error: 'La fecha de inicio debe ser menor a la de final' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener jornales del empleado', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener jornales del empleado', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                    | Requerido        |
| GET         | /api/datos/:empleadoId/:fechaInicio/:fechaFin<br><br>    | Obtiene datos agregados de jornales para un empleado en un rango de fechas         | **Path**: <br>`empleadoId` (integer) <br>`fechaInicio` (string) <br>`fechaFin` (string)                                                                                                                                            | 200 OK <br>`{ empleadoId, registros, diasTrabajo, diasLicencia, diasEnfermedad, diasFalta, horasTrabajadas, horasExtra }`          | 400 Bad Request <br>`{ error: 'Descripción del error' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener los datos', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener los datos', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                                                                                                                                                                                                                                        | Requerido        |
| GET         | /api/datos/todos/:fechaInicio/:fechaFin<br><br>          | Obtiene datos agregados de jornales para todos los empleados en un rango de fechas | **Path**: <br>`fechaInicio` (string) <br>`fechaFin` (string)                                                                                                                                                                       | 200 OK <br>`[ { empleadoId, registros, diasTrabajo, diasLicencia, diasEnfermedad, diasFalta, horasTrabajadas, horasExtra }, ... ]` | 400 Bad Request <br>`{ error: 'Descripción del error' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener los datos', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener los datos', detalle: 'Descripción del error', stack: 'Stack trace' }`                                                                                                                                                                                                                                                                                                                                        |
