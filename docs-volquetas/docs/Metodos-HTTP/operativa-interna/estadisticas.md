---
hide:
    - toc
---
## Estadísticas:

| Método HTTP | Endpoint                               | Descripción                                         | Parámetros (Body/Query/Path)                                                       | Respuesta Exitosa                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Respuesta de Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Token de Login |
| ----------- | -------------------------------------- | --------------------------------------------------- | ---------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| GET         | /api/estadisticas-chofer/:id           | Trae movimientos de volqueta de un chofer           | Path: `choferId` <br>Query: `fechaInicio`, `fechaFin`, `valorJornal`, `valorExtra` | 200 OK <br>`{ jornales: [...], datos: { diasTrabajo: number, horas: number, extra: number, entregas: number, levantes: number, viajes: number, promedioHorasPorDia: number, promedioViajesPorDia: number, salario: number, precioPorViaje: number, info: string } }`                                                                                                                                                                                                  | 400 Bad Request <br>`{ error: 'El valor del jornal debe ser mayor a 0' }` <br>`{ error: 'El valor de la hora extra debe ser mayor a 0' }` <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>`{ error: 'Las fechas proporcionadas no son válidas' }` <br>`{ error: 'La fecha de inicio debe ser menor a la de final' }` <br>`{ error: 'Error al obtener estadísticas del chofer', detalle: [...] }`                                                                                                                            | Requerido      |
| GET         | /api/estadisticas-movimientos-choferes | Trae movimientos de volqueta de todos los choferes  | Query: `fechaInicio`, `fechaFin`                                                   | 200 OK <br>`[ { choferId: number, entregas: number, levantes: number, total: number }, ... ]`                                                                                                                                                                                                                                                                                                                                                                         | 400 Bad Request <br>`{ error: 'Las fechas proporcionadas no son válidas' }` <br>`{ error: 'La fecha de inicio debe ser menor a la de final' }` <br>`{ error: 'Error al contar los movimientos', detalle: [...] }`                                                                                                                                                                                                                                                                                                                               | Requerido      |
| GET         | /api/estadisticas-cliente/:clienteId   | Trae la info de un cliente específico y sus pedidos | Query: `estado`, `fechaInicio`, `fechaFin`, `empresaId`, `particularId`            | 200 OK <br>`{ total: number, pagados: { cantidad: number, monto: number, ids: [number, ...] }, nopagados: { cantidad: number, monto: number, ids: [number, ...] }, estado: { levantado: { cantidad: number, ids: [number, ...] }, entregado: { cantidad: number, ids: [number, ...] }, iniciado: { cantidad: number, ids: [number, ...] }, cancelado: { cantidad: number, ids: [number, ...] } }, obras: { obraId: { cantidad: number, ids: [number, ...] }, ... } }` | 400 Bad Request <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>`{ error: 'Debe ingresar una empresa o un particular unicamente' }` <br>`{ error: "Los tipos de estado de pedidos solo pueden ser: ('cancelado', 'iniciado', 'entregado', 'levantado')" }` <br>`{ error: 'Error al obtener estadisticas del cliente', detalle: [...] }`                                                                                                                                                                                         | Requerido      |
| GET         | /api/estadisticas-clientes             | Trae la info de los clientes y sus pedidos          | Query: `fechaInicio`, `fechaFin`                                                   | 200 OK <br>`{ empresas: { empresaId: { pagados: { cantidad: number, monto: number }, nopagados: { cantidad: number, monto: number } }, ... }, particulares: { particularId: { pagados: { cantidad: number, monto: number }, nopagados: { cantidad: number, monto: number } }, ... } }`                                                                                                                                                                                | 400 Bad Request <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>`{ error: 'Error al obtener estadisticas', detalle: [...] }`                                                                                                                                                                                                                                                                                                                                    | Requerido      |
| GET         | /api/estadisticas-pedidos              | Trae la info general de los pedidos                 | Query: `fechaInicio`, `fechaFin`                                                   | 200 OK <br>`{ empresas: { empresaId: { pagados: { cantidad: number, monto: number }, nopagados: { cantidad: number, monto: number } }, ... }, particulares: { particularId: { pagados: { cantidad: number, monto: number }, nopagados: { cantidad: number, monto: number } }, ... } }`                                                                                                                                                                                | 400 Bad Request <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>`{ error: 'Error al obtener estadisticas', detalle: [...] }`                                                                                                                                                                                                                                                                                                                                    | Requerido      |
| GET         | /api/estadisticas-deudores             | Obtener información de los mayores deudores<br>     | Query: { fechaInicio, fechaFin, tipo, deudores }                                   | 200 OK: { topEmpresasNoPagados, topParticularesNoPagados }                                                                                                                                                                                                                                                                                                                                                                                                            | 400 Bad Request: { error: 'Cantidad de deudores debe ser mayor a 0' } <br><br>400 Bad Request: { error: 'Tipo de deuda debe ser por cantidad o por monto' } <br>400 Bad Request: { error: 'FechaFin debe ser despues de fechaInicio' } <br>400 Bad Request: { error: 'Debe ingresar fecha de inicio y fecha de fin' } <br>500 Internal Server Error: { error: 'Error al obtener estadisticas', detalle: errorsSequelize } <br>500 Internal Server Error: { error: 'Error al obtener estadisticas', detalle: error.message, stack: error.stack } | Requerido      |
