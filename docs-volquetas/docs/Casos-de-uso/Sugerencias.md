
| **Código** | **Título**            | **Descripción**                                                                                                                                                                                                                                                                                                                                                                                      | **Actor** | **Precondición**                                                 | **Flujo de Trabajo Principal**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | **Flujo Alternativo**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ---------- | --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | ---------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| CU01       | Agregar Sugerencia    | El usuario puede agregar una sugerencia para un pedido, seleccionando un chofer, horario y tipo de sugerencia (entrega o levante). El sistema verifica si el chofer ya tiene una sugerencia en el mismo horario y, de ser así, muestra una advertencia al usuario para confirmar si desea continuar.                                                                                                 | Usuario   | Usuario autenticado, choferes disponibles, pedido existente.     | 1. El usuario abre el modal para agregar una sugerencia a un pedido.  <br>2. El usuario selecciona un chofer de la lista desplegable.  <br>3. El usuario selecciona un horario sugerido.  <br>4. El usuario verifica el tipo de sugerencia (entrega o levante) que ya está preseleccionado.  <br>5. El usuario hace clic en el botón "Agregar Sugerencia".  <br>6. El sistema verifica si el chofer ya tiene una sugerencia en el mismo horario a través de la API.  <br>7. Si no hay conflictos de horario, el sistema envía la sugerencia a la API y la guarda en el sistema.  <br>8. El sistema muestra un mensaje de éxito y cierra el modal después de un breve intervalo.                                                                                                                                                                                                                                                                                                                                                                                                         | 7a. Si el chofer ya tiene una sugerencia en el mismo horario:  <br>- El sistema muestra una advertencia al usuario indicando el conflicto de horario con la información del otro pedido.  <br>- El usuario puede optar por confirmar y agregar la sugerencia a pesar del conflicto o cancelar la acción.  <br>- Si el usuario confirma, el sistema envía la sugerencia a la API y la guarda en el sistema.  <br>- Si el usuario cancela, la acción se detiene y permanece en el modal.  <br>  <br>8a. Si ocurre un error al intentar agregar la sugerencia:  <br>- El sistema muestra un mensaje de error indicando que no se pudo agregar la sugerencia.  <br>- El usuario puede intentar nuevamente o cerrar el modal.                                                                                                             |
| CU02       | Modificar Sugerencia  | El usuario puede modificar una sugerencia existente para un pedido, seleccionando un chofer, horario y tipo de sugerencia (entrega o levante). El sistema verifica si el chofer ya tiene una sugerencia en el mismo horario y, de ser así, muestra una advertencia al usuario para confirmar si desea continuar.                                                                                     | Usuario   | Usuario autenticado, choferes disponibles, sugerencia existente. | 1. El usuario abre el modal para modificar una sugerencia existente.  <br>2. El usuario selecciona un chofer de la lista desplegable.  <br>3. El usuario selecciona un nuevo horario sugerido.  <br>4. El usuario selecciona el tipo de sugerencia (entrega o levante).  <br>5. El usuario hace clic en el botón "Modificar Sugerencia".  <br>6. El sistema verifica si el chofer ya tiene una sugerencia en el mismo horario a través de la API.  <br>7. Si no hay conflictos de horario, el sistema actualiza la sugerencia en la API y la guarda en el sistema.  <br>8. El sistema muestra un mensaje de éxito y cierra el modal después de un breve intervalo.                                                                                                                                                                                                                                                                                                                                                                                                                      | 7a. Si el chofer ya tiene una sugerencia en el mismo horario:  <br>- El sistema muestra una advertencia al usuario indicando el conflicto de horario con la información del otro pedido.  <br>- El usuario puede optar por confirmar y modificar la sugerencia a pesar del conflicto o cancelar la acción.  <br>- Si el usuario confirma, el sistema actualiza la sugerencia en la API y la guarda en el sistema.  <br>- Si el usuario cancela, la acción se detiene y permanece en el modal.  <br>  <br>8a. Si ocurre un error al intentar modificar la sugerencia:  <br>- El sistema muestra un mensaje de error indicando que no se pudo modificar la sugerencia.  <br>- El usuario puede intentar nuevamente o cerrar el modal.                                                                                                  |
| CU03       | Gestionar Sugerencias | El usuario puede visualizar, agregar, modificar y eliminar sugerencias asociadas a un pedido. La interfaz varía según el tamaño de la pantalla, presentando una tabla en pantallas más grandes y un formato de lista en pantallas pequeñas. El sistema también permite realizar acciones como agregar una sugerencia de tipo "Entrega" o "Levante", modificar una sugerencia existente o eliminarla. | Usuario   | Usuario autenticado, pedido existente con choferes disponibles.  | 1. El usuario accede a la pantalla de sugerencias de un pedido específico.  <br>2. El sistema muestra las sugerencias actuales en formato tabla o lista dependiendo del tamaño de la pantalla.  <br>3. Si no existen sugerencias, el usuario puede agregar una nueva sugerencia de tipo "Entrega" o "Levante" haciendo clic en el botón correspondiente.  <br>4. Si existen sugerencias, el usuario puede optar por modificar o eliminar una sugerencia existente usando los botones "Modificar" o "Eliminar" en cada fila de la sugerencia.  <br>5. Al hacer clic en "Agregar Sugerencia", se muestra un modal donde el usuario selecciona un chofer, horario y tipo de sugerencia.  <br>6. El usuario confirma la acción, y el sistema guarda la sugerencia, la cual se muestra inmediatamente en la lista.  <br>7. Si el usuario elige modificar una sugerencia, se abre un modal con los datos actuales, donde el usuario puede hacer cambios y guardarlos.  <br>8. Si el usuario elige eliminar una sugerencia, el sistema la elimina de la base de datos y la lista se actualiza. | 5a. Si ocurre un error al agregar la sugerencia:  <br>- El sistema muestra un mensaje de error y el usuario puede intentar nuevamente.  <br>  <br>7a. Si ocurre un error al modificar la sugerencia:  <br>- El sistema muestra un mensaje de error y el usuario puede intentar nuevamente.  <br>  <br>8a. Si ocurre un error al eliminar la sugerencia:  <br>- El sistema muestra un mensaje de error y la sugerencia no se elimina.  <br>  <br>4a. Si el tipo de sugerencia seleccionada es "Levante", el sistema busca automáticamente el número de volqueta asociado al pedido. Si no hay un número de volqueta asociado, el usuario debe agregarlo manualmente antes de confirmar la sugerencia.  <br>  <br>3a. Si el pedido ya tiene dos movimientos registrados, el sistema desactiva la opción de agregar nuevas sugerencias. |








