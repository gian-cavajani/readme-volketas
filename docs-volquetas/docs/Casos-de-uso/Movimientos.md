
| **Código** | **Título**             | **Descripción**                                                                                                                                                               | **Actor** | **Precondición**                                                 | **Flujo de Trabajo Principal**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | **Flujo Alternativo**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| ---------- | ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| CU01       | Agregar Movimiento     | El usuario puede agregar un movimiento a un pedido, especificando el chofer, horario, tipo de movimiento, y el número de volqueta.                                            | Usuario   | Usuario autenticado, pedido existente, choferes disponibles.     | 1. El usuario abre el formulario para agregar un movimiento a un pedido específico.  <br>2. El sistema muestra un modal con los campos para seleccionar un chofer, el horario del movimiento, el tipo de movimiento, y el número de volqueta.  <br>3. El usuario selecciona un chofer de la lista desplegable.  <br>4. El sistema registra el ID del chofer seleccionado.  <br>5. El usuario selecciona la fecha y hora para el movimiento.  <br>6. El sistema convierte la hora seleccionada a UTC y la registra.  <br>7. El usuario revisa el tipo de movimiento (preseleccionado según el contexto) y, si es necesario, ingresa el número de volqueta.  <br>8. El sistema registra el tipo de movimiento y el número de volqueta (si se proporciona).  <br>9. El usuario hace clic en "Agregar Movimiento".  <br>10. El sistema envía los datos del movimiento al servidor para ser guardados.  <br>11. El sistema confirma que el movimiento se ha guardado correctamente.  <br>12. Se muestra un mensaje de éxito al usuario, y el modal se cierra automáticamente después de un breve intervalo. | 1a. Si el movimiento es de tipo "levante" y se ha proporcionado un número de volqueta:  <br>- El sistema muestra una sección adicional para agregar la ubicación temporal de la volqueta levantada.  <br>- El usuario ingresa la ubicación temporal de la volqueta y confirma.  <br>- El sistema guarda la ubicación temporal de la volqueta y cierra el modal.  <br>- El movimiento se agrega al pedido con la ubicación temporal asociada.  <br>- Se muestra un mensaje de éxito al usuario, y el modal se cierra automáticamente después de un breve                                        |
| CU02       | Modificar Movimiento   | El usuario puede modificar un movimiento existente en un pedido, especificando el chofer, horario, y número de volqueta.                                                      | Usuario   | Usuario autenticado, movimiento existente, choferes disponibles. | 1. El usuario abre el formulario para modificar un movimiento específico.  <br>2. El sistema carga y muestra los detalles actuales del movimiento, incluyendo el chofer, horario, y número de volqueta.  <br>3. El usuario selecciona un chofer de la lista desplegable.  <br>4. El sistema registra el ID del chofer seleccionado.  <br>5. El usuario modifica la fecha y hora del movimiento.  <br>6. El sistema registra el horario actualizado.  <br>7. El usuario revisa o ingresa un nuevo número de volqueta, si aplica.  <br>8. El sistema registra el número de volqueta actualizado.  <br>9. El usuario hace clic en "Modificar Movimiento".  <br>10. El sistema envía los datos del movimiento modificado al servidor para ser actualizados.  <br>11. El sistema confirma que el movimiento se ha modificado correctamente.  <br>12. Se muestra un mensaje de éxito al usuario, y el modal se cierra automáticamente después de un breve intervalo.                                                                                                                                         | 1a. Si el número de volqueta no cambia:  <br>- El sistema pasa el número de volqueta como `null` en la solicitud, para cumplir con la restricción de la API.  <br>- El flujo continúa normalmente con la actualización del movimiento.  <br>  <br>2a. Si la modificación falla:  <br>- El sistema muestra un mensaje de error al usuario indicando que no se pudo modificar el movimiento.  <br>- El usuario puede corregir la información e intentar nuevamente, o cancelar la operación.  <br>- El modal se mantiene abierto para que el usuario pueda realizar las correcciones necesarias. |
| **Código** | **Título**             | **Descripción**                                                                                                                                                               | **Actor** | **Precondición**                                                 | **Flujo de Trabajo Principal**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | **Flujo Alternativo**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| CU03       | Visualizar Movimientos | El usuario puede visualizar la lista de movimientos de una volqueta específica, incluyendo detalles como el número de volqueta, horario, último movimiento y chofer asignado. | Usuario   | Usuario autenticado, volqueta con movimientos registrados.       | 1. El usuario accede a la sección de movimientos para una volqueta específica.  <br>2. El sistema carga y muestra una lista de movimientos asociados a la volqueta, incluyendo el número de volqueta, horario, tipo de movimiento, y chofer asignado.  <br>3. El usuario revisa los detalles de cada movimiento en la tabla o lista, según el tamaño de pantalla.  <br>4. Si el usuario desea ver más detalles sobre el pedido asociado a un movimiento, hace clic en el botón "Ver Pedido".  <br>5. El sistema redirige al usuario a la pantalla de detalles del pedido correspondiente, pasando el ID del pedido y el ID de la volqueta como parámetros.                                                                                                                                                                                                                                                                                                                                                                                                                                             | 1a. Si no hay movimientos registrados para la volqueta:  <br>- El sistema muestra un mensaje indicando que no hay movimientos disponibles para esa volqueta.  <br>- El flujo alternativo finaliza sin redirección.  <br>  <br>2a. Si ocurre un error al cargar los movimientos:  <br>- El sistema muestra un mensaje de error al usuario indicando que hubo un problema al cargar los movimientos.  <br>- El usuario puede intentar recargar la página o contactar al soporte.                                                                                                                 |





