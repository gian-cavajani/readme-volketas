# Documentación de los Métodos HTTP del Proyecto

- [Usuarios:](#Usuarios: "wikilink")
- [Cajas:](#Cajas: "wikilink")
- [Camiones:](#Camiones: "wikilink")
- [Config:](#Config: "wikilink")
- [ContactoEmpresas:](#ContactoEmpresas: "wikilink")
- [Empleado](#Empleado "wikilink")
- [Empresa](#Empresa "wikilink")
- [Estadísticas:](#Estadísticas: "wikilink")
- [Facturas](#Facturas "wikilink")
- [Historico-camion](#Historico-camion "wikilink")
- [Jornales y Datos:](#Jornales y Datos: "wikilink")
- [Movimientos:](#Movimientos: "wikilink")
- [Obras:](#Obras: "wikilink")
- [PagoPedidos:](#PagoPedidos: "wikilink")
- [Particulares:](#Particulares: "wikilink")
- [Pedidos:](#Pedidos: "wikilink")
- [Permisos:](#Permisos: "wikilink")
- [Servicios-Camion:](#Servicios-Camion: "wikilink")
- [Sugerencias:](#Sugerencias: "wikilink")
- [Telefono:](#Telefono: "wikilink")
- [Volquetas](#Volquetas "wikilink")

## Usuarios:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/usuarios | Crea un nuevo usuario | **Body:** <br>`rol` (string), `email` (string), `password` (string), `confirmPassword` (string), `empleadoId` (integer) | 201 Created <br>`{ "id": <id>, "email": <email>, "empleadoId": <empleadoId>, "rol": <rol>, "activo": <activo> }` | 400 Bad Request<br>`{ "error": "Todos los campos son obligatorios" }` <br>`{ "error": "La contraseña no es suficientemente fuerte" }` <br>`{ "error": "Email inválido" }` <br>`{ "error": "Las contraseñas no coinciden" }` <br>`{ "error": "Rol inválido" }` <br>`{ "error": "Empleado no existe" }` <br>500 Internal Server Error <br>`{ "error": "Error al crear usuario", "detalle": <detalles> }` | No Requerido |
| GET | /api/usuarios | Obtiene todos los usuarios | \- | 200 OK <br>`[ { ...usuario1 }, { ...usuario2 }, ... ]` | 500 Internal Server Error <br>`{ "error": "Error al obtener usuarios", "detalle": <detalles> }` | Requerido(Admin) |
| GET | /api/usuarios/:id | Obtiene un usuario por ID | **Path:** <br>`usuarioId` (integer) | 200 OK <br>`{ ...usuario }` | 404 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>500 Internal Server Error <br>`{ "error": "Error al obtener usuario", "detalle": <detalles> }` | Requerido |
| GET | /api/usuarios/inactivos | Obtiene todos los usuarios inactivos | \- | 200 OK <br>`[ { ...usuario1 }, { ...usuario2 }, ... ]` | 500 Internal Server Error <br>`{ "error": "Error al obtener usuarios", "detalle": <detalles> }` | Requerido(Admin) |
| POST | /api/usuarios/login | Loguea un usuario y devuelve un token JWT | **Body:** <br>`email` (string), `password` (string) | 200 OK <br>`{ "token": <token> }` | 400 Bad Request <br>`{ "error": "Email y contraseña son obligatorios" }` <br>401 Unauthorized <br>`{ "error": "Credenciales inválidas" }` <br>`403 Forbidden` <br>`{ "error": "Usuario no activado" }` <br>500 Internal Server Error <br>`{ "error": "Error al loguear usuario", "detalle": <detalles> }` | No Requerido |
| POST | /api/usuarios/confirmar | Confirma un usuario mediante email | **Body:** <br>`email` (string) | `202 Accepted` <br>`{ "detalle": "Usuario con mail: <email> activado exitosamente" }` | 400 Bad Request <br>`{ "error": "Email es obligatorio" }` <br>400 Not Found <br>`{ "error": "Usuario con ese mail no existe" }` <br>400 Bad Request <br>`{ "error": "Usuario ya esta activado" }` <br>500 Internal Server Error <br>`{ "error": "Error al confirmar usuario", "detalle": <detalles> }` | Requerido(Admin) |
| DELETE | /api/usuarios/:id | Borra un usuario por ID | **Path:** <br>`usuarioId` (integer) | 200 OK <br>`{ "detalle": "Usuario borrado exitosamente" }` | 400 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>500 Internal Server Error <br>`{ "error": "Error al borrar usuario", "detalle": <detalles> }` | Requerido(Admin) |
| PUT | /api/usuarios/:id | Modifica un usuario por ID | **Path:** <br>`usuarioId` (integer) <br>**Body:** <br>`rol` (string, optional), `email` (string, optional), `activo` (boolean, optional) | 200 OK <br>`{ ...req.body }` | 400 Bad Request <br>`{ "error": "Email inválido" }` <br>400 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>500 Internal Server Error <br>`{ "error": "Error al modificar usuario", "detalle": <detalles> }` | Requerido(Admin) |
| PUT | /api/usuarios-contrasenia | Cambia la contraseña del usuario actual | **Body:** <br>`email` (string), `oldPassword` (string), `newPassword` (string), `confirmNewPassword` (string) | 200 OK <br>`{ "message": "Contraseña actualizada exitosamente" }` | 400 Bad Request <br>`{ "error": "Todos los campos son obligatorios" }` <br>`{ "error": "Email inválido" }` <br>`{ "error": "Las contraseñas no coinciden" }` <br>`{ "error": "La contraseña anterior y la nueva deben ser distintas" }` <br>`{ "error": "La nueva contraseña no es suficientemente fuerte" }` <br>400 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>401 Unauthorized <br>`{ "error": "La contraseña antigua es incorrecta" }` <br>500 Internal Server Error <br>`{ "error": "Error al cambiar la contraseña", "detalle": <detalles> }` | Requerido |
| PUT | /api/usuarios/usuarios-contrasenia-admin | Cambia la contraseña de otro usuario siendo admin | **Body:** <br>`email` (string), `newPassword` (string), `confirmNewPassword` (string) | 200 OK <br>`{ "message": "Contraseña actualizada exitosamente" }` | 400 Bad Request <br>`{ "error": "Todos los campos son obligatorios" }` <br>`{ "error": "Email inválido" }` <br>`{ "error": "Las contraseñas no coinciden" }` <br>`{ "error": "La nueva contraseña no es suficientemente fuerte" }` <br>400 Not Found <br>`{ "error": "Usuario no encontrado" }` <br>500 Internal Server Error <br>`{ "error": "Error al cambiar la contraseña", "detalle": <detalles> }` | Requerido(Admin) |

## Cajas:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/cajas | Crear una nueva caja | Body: { fecha, motivo, empleadoId, pedidoId, monto, descripcion, moneda } | 201 Created: { nuevaCaja } | 400 Bad Request: { error: 'La fecha es obligatoria y debe ser válida' } <br>400 Bad Request: { error: 'Monto es obligatorio' } <br>400 Bad Request: { error: 'Motivo inválido, debe ser: ('vale', 'gasto','ingreso', 'ingreso pedido', 'ingreso cochera', 'extraccion')' } <br>400 Bad Request: { error: 'Moneda inválida, debe ser: ('dolar' o 'peso')' } <br>400 Bad Request: { error: 'Monto inválido, este tipo de motivo debe tener monto positivo' } <br>400 Bad Request: { error: 'Monto inválido, este tipo de motivo debe tener monto negativo' } <br>400 Bad Request: { error: 'Debe agregar un empleado para el vale' } <br>400 Bad Request: { error: 'Debe agregar un pedido para el ingreso de tipo pedido' } <br>404 Not Found: { error: 'Empleado no existe' } <br>404 Not Found: { error: 'Pedido no existe' } <br>400 Bad Request: { error: 'Pedido ya tiene una entrada de dinero', cajasConPedido } | Requerido |
| GET | /api/cajas | Obtener todas las cajas | Query: fechaInicio, fechaFin | 200 OK: { datos: { contadorMotivos, montoPeso, montoDolar }, cajas } | 400 Bad Request: { error: 'Debe ingresar fecha de inicio y fecha de fin' } <br>500 Internal Server Error: { error: 'Error al obtener los datos de la caja', detalle: errorsSequelize } | Requerido |
| GET | /api/cajas/id | Obtener una caja por ID | Path: cajaId | 200 OK: { caja } | 404 Not Found: { error: 'Caja no encontrada' } <br>500 Internal Server Error: { error: 'Error al obtener la caja', detalle: errorsSequelize } | Requerido |
| DELETE | /api/cajas/id | Eliminar una caja por ID | Path: cajaId | 200 OK: { detalle: 'Caja eliminada exitosamente' } | 404 Not Found: { error: 'Caja no encontrada' } <br>500 Internal Server Error: { error: 'Error al eliminar la caja', detalle: errorsSequelize } | Requerido |
| PUT | /api/cajas/id | Modificar una caja por ID | Path: cajaId <br>Body: { fecha, motivo, empleadoId, pedidoId, monto, descripcion, moneda } | 200 OK: { caja } | 400 Bad Request: { error: 'La fecha debe ser válida' } <br>400 Bad Request: { error: "Motivo inválido, debe ser: ('vale', 'gasto', 'ingreso', 'ingreso pedido', 'ingreso cochera', 'extraccion')" } <br>400 Bad Request: { error: "Moneda inválida, debe ser: ('dolar' o 'peso')" } <br>404 Not Found: { error: 'Empleado no existe' } <br>404 Not Found: { error: 'Pedido no existe' } <br>500 Internal Server Error: { error: 'Error al modificar la caja', detalle: errorsSequelize } | Requerido |

## Camiones:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | `/api/camiones` | Crear un nuevo camión | **Body**: <br>- `matricula` (string, requerido) <br>- `modelo` (string, requerido) <br>- `anio` (integer, opcional) <br>- `estado` (string, opcional) | **201**: JSON del camión creado | **400**: Matricula o modelo no proporcionado <br>**500**: Error al crear camión | Requerido |
| GET | `/api/camiones` | Obtener todos los camiones | N/A | **200**: JSON de la lista de camiones | **500**: Error al obtener camiones | Requerido |
| GET | `api/camiones/:camionId` | Obtener un camión específico | **Path**: <br>- `camionId` (integer, requerido) | **200**: JSON del camión solicitado | **404**: Camión no encontrado <br>**500**: Error al obtener camión | Requerido |
| PUT | `api/camiones/:camionId` | Actualizar un camión específico | **Path**: <br>- `camionId` (integer, requerido) <br>**Body**: <br>- `matricula` (string, opcional) <br>- `modelo` (string, opcional) <br>- `anio` (integer, opcional) <br>- `estado` (string, opcional) | **200**: JSON del camión actualizado | **404**: Camión no encontrado <br>**500**: Error al actualizar camión | Requerido |
| DELETE | `api/camiones/:camionId` | Borrar un camión específico | **Path**: <br>- `camionId` (integer, requerido) | **200**: Camión borrado exitosamente | **404**: Camión no encontrado <br>**500**: Error al borrar camión | Requerido(Admin) |

## Config:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | `/api/config` | Crear una nueva configuración | **Body**: <br>- `anio` (integer, requerido) <br>- `precioSinIva` (decimal, requerido) <br>- `horasDeTrabajo` (integer, requerido) <br>- `configActiva` (boolean, opcional) | **201**: JSON de la configuración creada | **500**: Error al crear la configuración | Requerido(Admin) |
| GET | `/api/config/:configId` | Obtener una configuración específica | **Path**: <br>- `configId` (integer, requerido) | **200**: JSON de la configuración solicitada | **404**: Configuración no encontrada <br>**500**: Error al obtener la configuración | Requerido(Admin) |
| GET | `/api/config` | Obtener todas las configuraciones | N/A | **200**: JSON de la lista de configuraciones | **500**: Error al obtener las configuraciones | Requerido(Admin) |
| GET | `/api/config-activa` | Obtener la configuración activa | N/A | **200**: JSON de la configuración activa | **500**: Error al obtener la configuración activa | Requerido(Admin) |
| PUT | `/api/config/:configId` | Actualizar una configuración específica | **Path**: <br>- `configId` (integer, requerido) <br>**Body**: <br>- `anio` (integer, opcional) <br>- `precioSinIva` (decimal, opcional) <br>- `horasDeTrabajo` (integer, opcional) <br>- `configActiva` (boolean, opcional) | **200**: JSON de la configuración actualizada | **404**: Configuración no encontrada <br>**500**: Error al actualizar la configuración | Requerido(Admin) |

## ContactoEmpresas:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | `/api/contacto-empresas` | Crear un nuevo contacto de empresa | **Body**: <br>- `nombre` (string, requerido) <br>- `descripcion` (string, opcional) <br>- `email` (string, opcional) <br>- `empresaId` (integer, requerido) <br>- `obraId` (integer, opcional) | **201**: JSON del contacto de empresa creado | **400**: Validaciones fallidas <br>**404**: Empresa u obra no encontrada <br>**500**: Error al crear el contacto | Requerido |
| GET | `/contacto-empresas/:contactoEmpresaId` | Obtener un contacto de empresa específico | **Path**: <br>- `contactoEmpresaId` (integer, requerido) | **200**: JSON del contacto de empresa solicitado | **404**: Contacto no encontrado <br>**500**: Error al obtener el contacto | Requerido |
| GET | `/api/contacto-empresas` | Obtener todos los contactos de empresa | N/A | **200**: JSON de la lista de contactos de empresa | **500**: Error al obtener los contactos | Requerido |
| PUT | `/api/contacto-empresas/:contactoEmpresaId` | Actualizar un contacto de empresa específico | **Path**: <br>- `contactoEmpresaId` (integer, requerido) <br>**Body**: <br>- Cualquiera de los campos del contacto (nombre, descripcion, email, etc.) | **200**: JSON del contacto de empresa actualizado | **404**: Contacto no encontrado <br>**500**: Error al actualizar el contacto | Requerido |
| DELETE | `/api/contacto-empresas/:contactoEmpresaId` | Eliminar un contacto de empresa específico | **Path**: <br>- `contactoEmpresaId` (integer, requerido) | **200**: Mensaje confirmando la eliminación | **404**: Contacto no encontrado <br>**500**: Error al eliminar el contacto | Requerido(Admin) |
| POST | `/api/contacto-empresas/asignar/:contactoEmpresaId` | Asignar o reasignar una obra a un contacto de empresa | **Path**: <br>- `contactoEmpresaId` (integer, requerido) <br>**Body**: <br>- `obraId` (integer, requerido) | **200**: Mensaje confirmando la asignación de la obra | **400**: Error en validación <br>**404**: Contacto u obra no encontrado <br>**500**: Error al asignar la obra | Requerido |

## Empleado

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | `/api/empleados` | Crea un nuevo empleado. | **Body:** `nombre`, `cedula`, `rol`, `fechaEntrada`, `fechaSalida`, `direccion` | 201 Created: Empleado creado. | 400 Bad Request: Validaciones fallidas. <br>500 Internal Server Error: Error al crear el empleado. | Requerido |
| GET | `/api/empleados` | Obtiene una lista de todos los empleados. | \- | 200 OK: Lista de empleados. | 500 Internal Server Error: Error al obtener los empleados. | No Requerido |
| GET | `/api/empleados/:empleadoId` | Obtiene un empleado por su ID. | **Path:** `empleadoId` | 200 OK: Empleado encontrado. | 400 Not Found: Empleado no encontrado. <br>500 Internal Server Error: Error al obtener el empleado. | Requerido |
| DELETE | `/api/empleados/:empleadoId` | Elimina un empleado por su ID. | **Path:** `empleadoId` | 200 OK: Empleado eliminado exitosamente. | 400 Not Found: Empleado no encontrado. <br>400 Bad Request: Empleado tiene un usuario vinculado. <br>500 Internal Server Error: Error al eliminar el empleado. | Requerido(Admin) |
| PUT | `/api/empleados/:empleadoId/estado` | Cambia el estado (habilitado/deshabilitado) de un empleado. | **Path:** `empleadoId` <br>**Body:** `fechaSalida` | `202 Accepted`: Estado del empleado actualizado. | 400 Bad Request: Validaciones fallidas. <br>500 Internal Server Error: Error al cambiar el estado del empleado. | Requerido |
| PUT | `/api/empleados/:empleadoId` | Modifica los datos de un empleado. | **Path:** `empleadoId` <br>**Body:** `nombre`, `cedula`, `rol`, `habilitado`, `fechaEntrada`, `fechaSalida`, `direccion` | 200 OK: Empleado modificado exitosamente. | 400 Not Found: Empleado no encontrado. <br>400 Bad Request: Validaciones fallidas. <br>500 Internal Server Error: Error al modificar el empleado. | Requerido |
| GET | `/api/empleados/sin-usuario-activos` | Obtiene empleados activos que no tienen un usuario vinculado. | \- | 200 OK: Lista de empleados activos sin usuario. | 500 Internal Server Error: Error al obtener los empleados. | No Requerido |

## Empresa

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/empresas | Crea una nueva empresa | **Body:** <br>- `rut` (opcional, 12 caracteres) <br>- `nombre` (requerido) <br>- `descripcion` (opcional) <br>- `razonSocial` (opcional) | 201 Created <br>`{ id, rut, nombre, descripcion, razonSocial }` | 400 Bad Request <br>`{ error: 'El RUT debe tener 12 caracteres.' }` <br>`{ error: 'El nombre de la empresa es obligatorio' }` <br>500 Internal Server Error <br>`{ error: 'Error al crear empresa', detalle: [lista de errores] }` | Requerido |
| GET | /api/empresas/:id | Obtiene los detalles de una empresa | **Path:** <br>- `empresaId` (requerido) | 200 OK <br>`{ id, rut, nombre, descripcion, razonSocial, ... }` | 400 Not Found <br>`{ error: 'Empresa no encontrada' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener empresa', detalle: [lista de errores] }` | Requerido |
| GET | /api/empresas | Obtiene todas las empresas | \- Sin parámetros | 200 OK <br>`[{ id, nombre, rut }, ...]` | 500 Internal Server Error <br>`{ error: 'Error al obtener empresas', detalle: [lista de errores] }` | Requerido |
| GET | /api/empresas/buscar | Busca empresas según criterios | **Query:** <br>- `rut` (opcional) <br>- `nombre` (opcional) <br>- `razonSocial` (opcional) <br>- `letraInicial` (opcional, una letra) | 200 OK <br>`[{ id, rut, nombre, descripcion, razonSocial }, ...]` | 400 Bad Request <br>`{ error: 'Debe proporcionar al menos un parámetro de búsqueda (rut, nombre, razonSocial, letraInicial).' }` <br>`{ error: 'La búsqueda por letra inicial debe tener solo una letra' }` <br>500 Internal Server Error <br>`{ error: 'Error al buscar empresas', detalle: [lista de errores] }` | Requerido |
| PUT | /api/empresas/:id | Actualiza una empresa existente | **Path:** <br>- `empresaId` (requerido) <br>**Body:** <br>- `rut` (opcional, 12 caracteres) <br>- `nombre` (opcional) <br>- `descripcion` (opcional) <br>- `razonSocial` (opcional) | 200 OK <br>`{ id, rut, nombre, descripcion, razonSocial }` | 400 Bad Request <br>`{ error: 'El RUT debe tener 12 caracteres.' }` <br>400 Not Found <br>`{ error: 'Empresa no encontrada' }` <br>500 Internal Server Error <br>`{ error: 'Error al modificar empresa', detalle: [lista de errores] }` | Requerido |
| DELETE | /api/empresas/:id | Elimina una empresa existente | **Path:** <br>- `empresaId` (requerido) | 200 OK <br>`{ detalle: 'Empresa con nombre {nombre} fue eliminado correctamente' }` | 400 Not Found <br>`{ error: 'La Empresa con ese id no existe' }` <br>500 Internal Server Error <br>`{ error: 'Error al borrar empresa', detalle: [lista de errores] }` | Requerido(Admin) |

## Estadísticas:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| GET | /api/estadisticas-chofer/:id | Trae movimientos de volqueta de un chofer | Path: `choferId` <br>Query: `fechaInicio`, `fechaFin`, `valorJornal`, `valorExtra` | 200 OK <br>`{ jornales: [...], datos: { diasTrabajo: number, horas: number, extra: number, entregas: number, levantes: number, viajes: number, promedioHorasPorDia: number, promedioViajesPorDia: number, salario: number, precioPorViaje: number, info: string } }` | 400 Bad Request <br>`{ error: 'El valor del jornal debe ser mayor a 0' }` <br>`{ error: 'El valor de la hora extra debe ser mayor a 0' }` <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>`{ error: 'Las fechas proporcionadas no son válidas' }` <br>`{ error: 'La fecha de inicio debe ser menor a la de final' }` <br>`{ error: 'Error al obtener estadísticas del chofer', detalle: [...] }` | Requerido |
| GET | /api/estadisticas-movimientos-choferes | Trae movimientos de volqueta de todos los choferes | Query: `fechaInicio`, `fechaFin` | 200 OK <br>`[ { choferId: number, entregas: number, levantes: number, total: number }, ... ]` | 400 Bad Request <br>`{ error: 'Las fechas proporcionadas no son válidas' }` <br>`{ error: 'La fecha de inicio debe ser menor a la de final' }` <br>`{ error: 'Error al contar los movimientos', detalle: [...] }` | Requerido |
| GET | /api/estadisticas-cliente/:clienteId | Trae la info de un cliente específico y sus pedidos | Query: `estado`, `fechaInicio`, `fechaFin`, `empresaId`, `particularId` | 200 OK <br>`{ total: number, pagados: { cantidad: number, monto: number, ids: [number, ...] }, nopagados: { cantidad: number, monto: number, ids: [number, ...] }, estado: { levantado: { cantidad: number, ids: [number, ...] }, entregado: { cantidad: number, ids: [number, ...] }, iniciado: { cantidad: number, ids: [number, ...] }, cancelado: { cantidad: number, ids: [number, ...] } }, obras: { obraId: { cantidad: number, ids: [number, ...] }, ... } }` | 400 Bad Request <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>`{ error: 'Debe ingresar una empresa o un particular unicamente' }` <br>`{ error: "Los tipos de estado de pedidos solo pueden ser: ('cancelado', 'iniciado', 'entregado', 'levantado')" }` <br>`{ error: 'Error al obtener estadisticas del cliente', detalle: [...] }` | Requerido |
| GET | /api/estadisticas-clientes | Trae la info de los clientes y sus pedidos | Query: `fechaInicio`, `fechaFin` | 200 OK <br>`{ empresas: { empresaId: { pagados: { cantidad: number, monto: number }, nopagados: { cantidad: number, monto: number } }, ... }, particulares: { particularId: { pagados: { cantidad: number, monto: number }, nopagados: { cantidad: number, monto: number } }, ... } }` | 400 Bad Request <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>`{ error: 'Error al obtener estadisticas', detalle: [...] }` | Requerido |
| GET | /api/estadisticas-pedidos | Trae la info general de los pedidos | Query: `fechaInicio`, `fechaFin` | 200 OK <br>`{ empresas: { empresaId: { pagados: { cantidad: number, monto: number }, nopagados: { cantidad: number, monto: number } }, ... }, particulares: { particularId: { pagados: { cantidad: number, monto: number }, nopagados: { cantidad: number, monto: number } }, ... } }` | 400 Bad Request <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>`{ error: 'Error al obtener estadisticas', detalle: [...] }` | Requerido |
| GET | /api/estadisticas-deudores | Obtener información de los mayores deudores<br> | Query: { fechaInicio, fechaFin, tipo, deudores } | 200 OK: { topEmpresasNoPagados, topParticularesNoPagados } | 400 Bad Request: { error: 'Cantidad de deudores debe ser mayor a 0' } <br><br>400 Bad Request: { error: 'Tipo de deuda debe ser por cantidad o por monto' } <br>400 Bad Request: { error: 'FechaFin debe ser despues de fechaInicio' } <br>400 Bad Request: { error: 'Debe ingresar fecha de inicio y fecha de fin' } <br>500 Internal Server Error: { error: 'Error al obtener estadisticas', detalle: errorsSequelize } <br>500 Internal Server Error: { error: 'Error al obtener estadisticas', detalle: error.message, stack: error.stack } | Requerido |

## Facturas

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/facturas | Crea una nueva factura. | **Body:** <br>`pedidosIds` (array de IDs) <br>`numeracion` (número de la factura) <br>`tipo` (tipo de pago: 'credito', 'contado', 'recibo') <br>`fechaPago` (fecha de pago) <br>`descripcion` (descripción) <br>`empresaId` (ID de empresa) <br>`particularId` (ID de particular) | 201 Created <br>JSON con los detalles de la factura creada | 400 Bad Request <br>Debe proporcionar solo uno: empresaId o particularId. <br>400 Bad Request <br>Tipo de pago debe ser válido, opciones: ('credito', 'contado', 'recibo') <br>`400 Bad Request` <br>Debe proporcionar al menos un ID de pedido. <br>500 Internal Server Error <br>Error al crear la factura: { detalle: "mensaje de error" } | Requerido |
| GET | /api/facturas | Obtiene una lista de facturas. | **Query:** <br>`ultimos` (número de facturas a recuperar) <br>`fechaInicio` (fecha de inicio) <br>`fechaFin` (fecha de fin) <br>`empresaId` (ID de empresa) <br>`particularId` (ID de particular) <br>`estado` (estado de la factura) | 200 OK <br>JSON con la lista de facturas | 400 Bad Request <br>`Debe proporcionar solo uno o ninguno: empresaId o particularId.` <br>400 Bad Request <br>`No se pueden traer más de 50 facturas a la vez` <br>`400 Bad Request` <br>`La factura solo puede estar: ('pendiente', 'anulada', 'pagada')` <br>`400 Bad Request` <br>`FechaFin debe ser después de fechaInicio` <br>`400 Bad Request` <br>`Debe ingresar fecha de inicio y fecha de fin` <br>500 Internal Server Error <br>`Error al obtener facturas: { detalle: "mensaje de error" }` | Requerido |
| GET | /api/facturas/:id | Obtiene los detalles de una factura específica. | **Path:** <br>`facturaId` (ID de la factura) | 200 OK <br>JSON con los detalles de la factura | 400 Not Found <br>`Factura no encontrada` <br>500 Internal Server Error <br>`Error al obtener la factura: { detalle: "mensaje de error" }` | Requerido |
| PUT | /api/facturas/:id | Modifica una factura existente. | **Body:** <br>`numeracion` (número de la factura) <br>`tipo` (tipo de pago) <br>`fechaPago` (fecha de pago) <br>`descripcion` (descripción) <br>**Path:** <br>`facturaId` (ID de la factura) | 200 OK <br>JSON con los detalles de la factura modificada | 400 Bad Request <br>`La fecha de pago debe ser válida` <br>400 Bad Request <br>`Tipo de pago debe ser válido, opciones: ('credito', 'contado', 'recibo')` <br>400 Not Found <br>`Factura no encontrada` <br>`400 Bad Request` <br>`No se puede modificar una factura anulada` <br>500 Internal Server Error <br>`Error al modificar Factura: { detalle: "mensaje de error" }` | Requerido |
| PUT | /api/facturas-recalcular/:id | Recalcula el monto de una factura. | **Path:** <br>`facturaId` (ID de la factura) | 200 OK <br>JSON con el detalle del monto recalculado | 400 Bad Request <br>`Factura no existe` <br>400 Bad Request <br>`Factura ya pagada` <br>`400 Bad Request` <br>`No se puede modificar una factura anulada` <br>500 Internal Server Error <br>`Error al modificar Factura: { detalle: "mensaje de error" }` | Requerido |
| PUT | /api/facturas-estado/:id | Cambia el estado de una factura. | **Body:** <br>`fechaPago` (fecha de pago, si se cambia a 'pagada') <br>`estado` (nuevo estado: 'pagada', 'anulada', 'pendiente') <br>**Path:** <br>`facturaId` (ID de la factura) | 200 OK <br>JSON con los detalles de la factura con el estado actualizado | 400 Bad Request <br>`Factura no existe` <br>400 Bad Request <br>`No se puede modificar una factura anulada` <br>`400 Bad Request` <br>`Factura ya está pagada` <br>`400 Bad Request` <br>`La fecha de pago es obligatoria y debe ser válida` <br>`400 Bad Request` <br>`Uno de los pedidos de esta factura ya está pagado.` <br>`400 Bad Request` <br>`Solo se puede cambiar a estado de factura: ('anulada', 'pagada', 'pendiente')` <br>500 Internal Server Error <br>`Error al modificar Factura: { detalle: "mensaje de error" }` | Requerido |
| DELETE | /api/facturas/:id | Elimina una factura existente. | **Path:** <br>`facturaId` (ID de la factura) | 201 Created <br>JSON con el mensaje de éxito | 400 Bad Request <br>`Factura no existe` <br>400 Bad Request <br>`No se puede eliminar una factura pagada` <br>500 Internal Server Error <br>`Error al Eliminar Factura: { detalle: "mensaje de error" }` | Requerido(Admin) |

## Historico-camion

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/historico-camion | Registra el uso de un camión por un chofer | Body: { empleadoId, camionId, fechaInicio } | 201 Created: `{ id, empleadoId, camionId, fechaInicio, fechaFin }` | 500 Internal Server Error: `{ error: 'Error al crear el historico-camion', detalle: <mensaje> }` <br>o <br>`500 Internal Server Error`: `{ error: 'Error al crear el historico-camion', detalle: <mensaje>, stack: <stack> }` | Requerido |
| GET | /api/historico-camion/asignacion | Obtiene las asignaciones actuales de todos los camiones | \- | 200 OK: `[{ id, empleadoId, camionId, fechaInicio, fechaFin, empleado: { nombre }, camion: { matricula } }]` | 500 Internal Server Error: `{ error: 'Error al obtener el historico-camion', detalle: <mensaje> }` <br>o <br>`500 Internal Server Error`: `{ error: 'Error al obtener el historico-camion', detalle: <mensaje>, stack: <stack> }` | Requerido |
| GET | /api/historico-camion | Obtiene el histórico de asignaciones de un camión o empleado específico | Query: { camionId, empleadoId } | 200 OK: `[{ id, empleadoId, camionId, fechaInicio, fechaFin, empleado: { nombre }, camion: { matricula } }]` | 400 Bad Request: `{ error: 'Debes proporcionar un id de camion o un id de empleado' }` <br>500 Internal Server Error: `{ error: 'Error al obtener el historico-camion', detalle: <mensaje> }` <br>o <br>`500 Internal Server Error`: `{ error: 'Error al obtener el historico-camion', detalle: <mensaje>, stack: <stack> }` | Requerido |

## Jornales y Datos:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/jornales | Crea un nuevo jornal | **Body**: <br>`empleadoId` (string) <br>`fecha` (string) <br>`entrada` (string, opcional) <br>`salida` (string, opcional) <br>`tipo` (string, uno de: trabajo, licencia, enfermedad, falta) | 201 Created <br>`{ id, empleadoId, fecha, entrada, salida, tipo, creadoPor }` | 400 Bad Request <br>`{ error: 'El empleadoId es obligatorio' }` <br>`{ error: 'Tipo inválido' }` <br>`{ error: 'La fecha es obligatoria y debe ser válida' }` <br>`{ error: 'La hora de entrada es obligatoria y debe ser un string' }` <br>`{ error: 'La hora de salida es obligatoria y debe ser un string' }` <br>`{ error: 'Ya existe un jornal para este empleado en la fecha especificada' }` <br>500 Internal Server Error <br>`{ error: 'Error al crear el jornal', detalle: 'Descripción del error' }` <br>`{ error: 'Error al crear el jornal', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |
| DELETE | /api/jornales/ | Borra un jornal existente | **Path**: <br>`jornalId` (integer) | 200 OK <br>`{ message: 'Jornal borrado exitosamente' }` | 400 Not Found <br>`{ error: 'Jornal no encontrado' }` <br>500 Internal Server Error <br>`{ error: 'Error al borrar el jornal', detalle: 'Descripción del error' }` <br>`{ error: 'Error al borrar el jornal', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido(Admin) |
| PUT | /api/jornales/:id | Edita un jornal existente | **Path**: <br>`jornalId` (integer) <br>**Body**: <br>`empleadoId` (string) <br>`fecha` (string) <br>`entrada` (string, opcional) <br>`salida` (string, opcional) <br>`tipo` (string, uno de: trabajo, licencia, enfermedad, falta) | 200 OK <br>`{ id, empleadoId, fecha, entrada, salida, tipo }` | 400 Not Found <br>`{ error: 'Jornal no encontrado' }` <br>400 Bad Request <br>`{ error: 'Ya existe un jornal para este empleado en esta fecha' }` <br>500 Internal Server Error <br>`{ error: 'Error al editar el jornal', detalle: 'Descripción del error' }` <br>`{ error: 'Error al editar el jornal', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |
| GET | /api/jornales/ | Obtiene un jornal específico | **Path**: <br>`jornalId` (integer) | 200 OK <br>`{ id, empleadoId, fecha, entrada, salida, tipo }` | 400 Not Found <br>`{ error: 'Jornal no encontrado' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener el jornal', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener el jornal', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |
| GET | /api/jornales/:empleadoId/:fechaInicio/:fechaFin<br><br> | Obtiene los jornales y movimientos de un empleado en un rango de fechas | **Path**: <br>`empleadoId` (integer) <br>`fechaInicio` (string) <br>`fechaFin` (string) <br>**Query**: <br>`empleadoId`, `fechaInicio`, `fechaFin` | 200 OK <br>`[ { id, fecha, tipo, horas, horasExtra, entrada, salida, entregas, levantes, viajes }, ... ]` | 400 Bad Request <br>`{ error: 'Empleado no existe' }` <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>`{ error: 'Las fechas proporcionadas no son válidas' }` <br>`{ error: 'La fecha de inicio debe ser menor a la de final' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener jornales del empleado', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener jornales del empleado', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |
| GET | /api/datos/:empleadoId/:fechaInicio/:fechaFin<br><br> | Obtiene datos agregados de jornales para un empleado en un rango de fechas | **Path**: <br>`empleadoId` (integer) <br>`fechaInicio` (string) <br>`fechaFin` (string) | 200 OK <br>`{ empleadoId, registros, diasTrabajo, diasLicencia, diasEnfermedad, diasFalta, horasTrabajadas, horasExtra }` | 400 Bad Request <br>`{ error: 'Descripción del error' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener los datos', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener los datos', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |
| GET | /api/datos/todos/:fechaInicio/:fechaFin<br><br> | Obtiene datos agregados de jornales para todos los empleados en un rango de fechas | **Path**: <br>`fechaInicio` (string) <br>`fechaFin` (string) | 200 OK <br>`[ { empleadoId, registros, diasTrabajo, diasLicencia, diasEnfermedad, diasFalta, horasTrabajadas, horasExtra }, ... ]` | 400 Bad Request <br>`{ error: 'Descripción del error' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener los datos', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener los datos', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |

## Movimientos:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de login |
|----|----|----|----|----|----|----|
| POST | /api/movimientos | Crea un nuevo movimiento | **Body**: <br>`pedidoId` (string) <br>`tipo` (string, uno de: entrega, levante) <br>`numeroVolqueta` (string, opcional) <br>`choferId` (string) <br>`horario` (string) | 201 Created <br>`{ id, pedidoId, tipo, numeroVolqueta, choferId, horario }` | 400 Bad Request <br>`{ error: 'Tipo solo puede ser "entrega" o "levante"' }` <br>`{ error: 'Movimiento debe tener Chofer' }` <br>`{ error: 'Movimiento debe tener Pedido' }` <br>`{ error: 'Movimiento debe tener horario' }` <br>`{ error: 'Volqueta no existe' }` <br>`{ error: 'Dado el estado de la volqueta (estado), esta no se puede utilizar' }` <br>`{ error: 'Id de Chofer no es válido' }` <br>`{ error: 'Id de Chofer no es válido, Empleado no es chofer' }` <br>`{ error: 'Para crear la entrega el pedido no debe tener movimientos' }` <br>`{ error: 'Volqueta esta siendo utilizada en otro lugar' }` <br>`{ error: 'Para crear el levante el pedido debe tener 1 movimiento(Entrega)' }` <br>`{ error: 'Volqueta del levante debe ser la misma que la de la entrega' }` <br>`{ error: 'El horario del levante debe ser después de la entrega' }` <br>`{ error: 'Para asignar volqueta al levante, la entrega debe tener una' }` <br>`{ error: 'Pedido no existe' }` <br>500 Internal Server Error <br>`{ error: 'Error al crear el movimiento', detalle: 'Descripción del error' }` <br>`{ error: 'Error al crear el movimiento', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |
| PUT | /api/movimientos/ | Modifica un movimiento existente | **Path**: <br>`movimientoId` (integer) <br>**Body**: <br>`horario` (string, opcional) <br>`pedidoId` (string, opcional) <br>`tipo` (string, opcional) <br>`numeroVolqueta` (string, opcional) <br>`choferId` (string, opcional) | 200 OK <br>`{ id, horario, pedidoId, tipo, numeroVolqueta, choferId }` | 400 Bad Request <br>`{ error: 'El Tipo o el Pedido de movimiento no son modificables' }` <br>`{ error: 'Debe incluir algún campo válido a modificar (chofer, horario, número de volqueta)' }` <br>`{ error: 'No existe movimiento' }` <br>`{ error: 'horario de levante debe ser después del de entrega' }` <br>`{ error: 'horario de entrega debe ser antes del de levante' }` <br>`{ error: 'Id de Chofer sugerido no es válido' }` <br>`{ error: 'Id de Chofer sugerido no es válido, Empleado no es chofer' }` <br>500 Internal Server Error <br>`{ error: 'Error al modificar el movimiento', detalle: 'Descripción del error' }` <br>`{ error: 'Error al modificar el movimiento', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |
| GET | /api/movimientos | Obtiene todos los movimientos |  | 200 OK <br>`[ { id, pedidoId, tipo, numeroVolqueta, choferId, horario }, ... ]` | 500 Internal Server Error <br>`{ error: 'Error al obtener movimientos', detalle: 'Descripción del error' }` <br>`{ error: 'Error al obtener movimientos', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |
| DELETE | /api/movimientos/ | Elimina un movimiento existente | **Path**: <br>`movimientoId` (integer) | 200 OK <br>`{ detalle: 'Movimiento eliminado exitosamente' }` | 400 Not Found <br>`{ error: 'No existe movimiento' }` <br>400 Bad Request <br>`{ error: 'Debe eliminar el levante primero' }` <br>`{ error: 'Movimiento eliminado, Pero la Volqueta de este pedido está siendo utilizada en algún otro lugar. Volqueta no puede ser usada en dos pedidos a la vez (Elimine la entrega o modifique su volqueta)' }` <br>500 Internal Server Error <br>`{ error: 'Error al eliminar el movimiento', detalle: 'Descripción del error' }` <br>`{ error: 'Error al eliminar el movimiento', detalle: 'Descripción del error', stack: 'Stack trace' }` | Requerido |

## Obras:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/obras | Crea una nueva obra | Body: `dias`, `destinoFinal`, `calle`, `esquina`, `barrio`, `coordenadas`, `numeroPuerta`, `descripcion`, `detalleResiduos`, `residuosMezclados`, `residuosReciclados`, `frecuenciaSemanal`, `particularId`, `empresaId` | 201 Created: `{ obra, obraDetalles }` | 400 Bad Request: `{ error: 'La calle es obligatoria' }` <br>400 Bad Request: `{ error: 'La Obra debe pertenecer exclusivamente a una empresa o a un particular' }` <br>400 Bad Request: `{ error: 'Ese Particular no existe' }` <br>400 Bad Request: `{ error: 'Esa Empresa no existe' }` <br>500 Internal Server Error: `{ error: 'Error al crear la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al crear la obra', detalle: [error details], stack: [stack trace] }` | Requerido |
| GET | /api/obras | Obtiene todas las obras | \- | 200 OK: `[ obra1, obra2, ... ]` | 500 Internal Server Error: `{ error: 'Error al obtener las obras', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al obtener las obras', detalle: [error details], stack: [stack trace] }` | Requerido |
| GET | /api/obras/:id | Obtiene una obra por ID | Path: `obraId` <br>Query: `detalle` (opcional, valores posibles: 'si') | 200 OK: `{ obra }` | 404 Not Found: `{ error: 'Obra no encontrada' }` <br>500 Internal Server Error: `{ error: 'Error al obtener la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al obtener la obra', detalle: [error details], stack: [stack trace] }` | Requerido |
| GET | /api/obras-ultimos-meses | Obtiene obras con pedidos recientes | Query: `cantidadMeses` | 200 OK: `[ obra1, obra2, ... ]` | 400 Bad Request: `{ error: 'La cantidad de meses debe ser mayor a 0' }` <br>500 Internal Server Error: `{ error: 'Error al obtener obras con pedidos recientes', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al obtener obras con pedidos recientes', detalle: [error details] }` | Requerido |
| PUT | /api/obras/:id | Actualiza una obra por ID | Path: `obraId` <br>Body: `dias`, `destinoFinal`, `calle`, `esquina`, `barrio`, `coordenadas`, `numeroPuerta`, `descripcion`, `detalleResiduos`, `residuosMezclados`, `residuosReciclados`, `frecuenciaSemanal`, `particularId`, `empresaId` | 200 OK: `{ updatedObra }` | 404 Not Found: `{ error: 'Obra no encontrada' }` <br>500 Internal Server Error: `{ error: 'Error al actualizar la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al actualizar la obra', detalle: [error details], stack: [stack trace] }` | Requerido |
| PUT | /api/obras-detalle/:id | Actualiza los detalles de una obra por ID | Path: `obraId` <br>Body: `detalleResiduos`, `residuosMezclados`, `residuosReciclados`, `destinoFinal`, `dias`, `frecuenciaSemanal` | 200 OK: `{ updatedObra }` | 404 Not Found: `{ error: 'Obra no encontrada' }` <br>500 Internal Server Error: `{ error: 'Error al actualizar los detalles de la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al actualizar los detalles de la obra', detalle: [error details], stack: [stack trace] }` | Requerido |
| DELETE | /api/obras/:id | Elimina una obra por ID | Path: `obraId` | 200 OK: `{ detalle: 'Obra en la calle [calle] eliminada correctamente' }` | 404 Not Found: `{ error: 'La Obra no existe' }` <br>500 Internal Server Error: `{ error: 'Error al eliminar la obra', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al eliminar la obra', detalle: [error details], stack: [stack trace] }` | Requerido(Admin) |

## PagoPedidos:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| PUT | /api/pago-pedididos/:id | Modifica un pago de pedido por ID | Path: `pagoPedidoId` <br>Body: `remito`, `precio`, `pagado`, `tipoPago` | 202 Accepted: `{ pagoPedido }` | 400 Bad Request: `{ error: 'Tipo de pago debe ser válido, opciones: (\'transferencia\', \'efectivo\', \'cheque\')' }` <br>400 Bad Request: `{ error: 'El campo precio debe ser un número válido.' }` <br>404 Not Found: `{ error: 'Pago del Pedido no existe' }` <br>500 Internal Server Error: `{ error: 'Error al modificar el pago', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al modificar el pago', detalle: [error details], stack: [stack trace] }` | Requerido(Admin) |

## Particulares:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/particulares | Crea un nuevo particular | Body: `nombre`, `cedula`, `descripcion`, `email` | 201 Created: `{ nuevoParticular }` | 400 Bad Request: `{ error: 'El nombre del Particular es obligatorio' }` <br>400 Bad Request: `{ error: 'El email no es válido' }` <br>400 Bad Request: `{ error: 'Cedula invalida, deben ser 8 numeros' }` <br>500 Internal Server Error: `{ error: 'Error al crear el particular', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al crear el particular', detalle: [error details], stack: [stack trace] }` | Requerido |
| GET | /api/particulares/:id | Obtiene un particular por ID | Path: `particularId` | 200 OK: `{ particular }` | 404 Not Found: `{ error: 'Particular no encontrado' }` <br>500 Internal Server Error: `{ error: 'Error al obtener el particular', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al obtener el particular', detalle: [error details], stack: [stack trace] }` | Requerido |
| GET | /api/particulares | Obtiene todos los particulares | No parámetros | 200 OK: `[ particulares ]` | 500 Internal Server Error: `{ error: 'Error al obtener los particulares', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al obtener los particulares', detalle: [error details], stack: [stack trace] }` | Requerido |
| GET | /api/particulares/buscar | Busca particulares según parámetros | Query: `nombre`, `email`, `cedula`, `letraInicial` | 200 OK: `[ particulares ]` | 400 Bad Request: `{ error: 'Debe proporcionar al menos un parámetro de búsqueda (nombre, email, cedula).' }` <br>400 Bad Request: `{ error: 'La búsqueda por letra inicial debe tener solo una letra' }` <br>500 Internal Server Error: `{ error: 'Error al buscar los particulares', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al buscar los particulares', detalle: [error details], stack: [stack trace] }` | Requerido |
| PUT | /api/particulares/:id | Actualiza un particular por ID | Path: `particularId` <br>Body: `nombre`, `cedula`, `descripcion`, `email` | 200 OK: `{ updatedParticular }` | 404 Not Found: `{ error: 'Cliente Particular no encontrado' }` <br>500 Internal Server Error: `{ error: 'Error al actualizar el particular', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al actualizar el particular', detalle: [error details], stack: [stack trace] }` | Requerido |
| DELETE | /api/particulares/:id | Elimina un particular por ID | Path: `particularId` | 200 OK: `{ detalle: 'Particular con nombre [nombre] fue eliminado correctamente' }` | 404 Not Found: `{ error: 'El particular con ese id no existe' }` <br>500 Internal Server Error: `{ error: 'Error al eliminar el particular', detalle: [error details] }` <br>500 Internal Server Error: `{ error: 'Error al eliminar el particular', detalle: [error details], stack: [stack trace] }` | Requerido(Admin) |

## Pedidos:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/pedidos/nuevo | Crea un pedido nuevo con entrega y levante | `obraId`, `descripcion`, `permisoId`, `referenciaId`, `cantidadMultiple`, `precio`, `pagado`, `tipoPago`, `horarioSugerido`, `choferSugeridoId` | 201 Created <br>`{ nuevaSugerencia, nuevoPedido, nuevoPago }` | 500 Internal Server Error <br>`{ error: 'Error al crear el pedido', detalle: error.message }` <br>o <br>`{ error: 'Error al crear el pedido', detalle: [error.errors], stack: error.stack.message }` | Requerido |
| POST | /api/pedidos/recambio | Crea un pedido nuevo como recambio | `obraId`, `descripcion`, `permisoId`, `referenciaId`, `cantidadMultiple`, `precio`, `pagado`, `tipoPago`, `horarioSugerido`, `choferSugeridoId` | 201 Created <br>`{ nuevaSugerencia, nuevoPedido, nuevoPago }` | 500 Internal Server Error <br>`{ error: 'Error al crear el pedido', detalle: error.message }` <br>o <br>`{ error: 'Error al crear el pedido', detalle: [error.errors], stack: error.stack.message }` | Requerido |
| POST | /api/pedidos/multiple | Crea varios pedidos | `obraId`, `descripcion`, `permisoId`, `referenciaId`, `cantidadMultiple`, `precio`, `pagado`, `tipoPago`, `horarioSugerido`, `choferSugeridoId` | 201 Created <br>`{ nuevaSugerencia, nuevoPedido, nuevoPago }` | 500 Internal Server Error <br>`{ error: 'Error al crear los pedidos', detalle: error.message }` <br>o <br>`{ error: 'Error al crear los pedidos', detalle: [error.errors], stack: error.stack.message }` | Requerido |
| GET(Desactivado) | /api/pedidos | Obtiene todos los pedidos | \- | 200 OK <br>`{ pagoPedidos, pedidos, sugerencias, movimientos }` | 500 Internal Server Error <br>`{ error: 'Error al obtener pedidos', detalle: error.message }` <br>o <br>`{ error: 'Error al obtener pedidos', detalle: [error.errors], stack: error.stack }` | Requerido |
| GET | /api/pedidos/multiples/ | Obtiene los pedidos múltiples de un pedido base | `pedidoId` (Path) | 200 OK <br>`[ { id, estado }, ... ]` | 400 Bad Request <br>`{ error: 'Id de pedido incorrecto, pedido debe existir y ser multiple' }` <br>o <br>500 Internal Server Error <br>`{ error: 'Error al obtener pedidos multiples', detalle: error.message }` <br>o <br>`{ error: 'Error al obtener pedidos multiples', detalle: [error.errors], stack: error.stack.toString() }` | Requerido |
| GET | /api/pedidos/filtro | Obtiene pedidos con filtros específicos | `ultimos`, `estado`, `pagado`, `fechaInicio`, `fechaFin`, `empresaId`, `particularId`, `tipoHorario`, `obraId`, `choferId`, `choferSugeridoId` | 200 OK <br>`[ { id, createdAt, descripcion, estado, creadoComo, pagoPedido, obra, movimiento, sugerencia }, ... ]` | 400 Bad Request <br>`{ error: 'No se pueden traer mas de 50 Pedidos a la vez' }` <br>o <br>`{ error: "Los tipos de horario solo pueden ser: ('movimientoEntrega', 'movimientoLevante', 'sugerenciaEntrega', 'sugerenciaLevante', 'creacion')" }` <br>o <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>o <br>`{ error: 'Debe ingresar fecha de inicio y fecha de fin' }` <br>o <br>`{ error: "Los tipos de estado de pedidos solo pueden ser: ('cancelado', 'iniciado', 'entregado', 'levantado')" }` <br>o <br>`{ error: 'Error al obtener pedido', detalle: error.message }` <br>o <br>`{ error: 'Error al obtener pedido', detalle: [error.errors], stack: error.stack }` | Requerido |
| GET | /api/pedidos/:id | Obtiene un pedido por ID | `pedidoId` (Path) | 200 OK <br>`{ id, descripcion, estado, creadoComo, pagoPedido, sugerencias, movimientos, obra }` | 400 Not Found <br>`{ error: 'Error al obtener pedido', detalle: 'Pedido no existe' }` <br>o <br>`{ error: 'Error al obtener pedido', detalle: error.message }` <br>o <br>`{ error: 'Error al obtener pedido', detalle: [error.errors], stack: error.stack }` | Requerido |
| PUT | /api/pedidos/:id | Modifica un pedido | `pedidoId` (Path), `descripcion`, `nroPesada`, `obraId` (Body) | 200 OK <br>`{ id, descripcion, nroPesada, obraId }` | 400 Not Found <br>`{ error: 'Pedido no existe' }` <br>o <br>`{ error: 'Obra no existe' }` <br>o <br>`{ error: 'Obra no esta activa' }` <br>o <br>`{ error: 'Obra y Permiso tienen diferente Cliente vinculado, El permiso puede ser el vigente de Volketas 10 o propio del particular' }` <br>o <br>`{ error: 'Obra y Permiso tienen diferente Empresa vinculada' }` | Requerido |

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| PATCH | /api/pedidos-permiso/:pedidoId | Modifica el permiso asociado a un pedido. | **Path:** `pedidoId` - ID del pedido. <br>**Body:** `permisoId` - ID del permiso a asociar (o `null` para eliminar el permiso). | 202 Accepted <br>`{ pedido }` | **404 Not Found** <br>`{ error: 'Pedido no existe' }` <br>**400 Bad Request** <br>`{ error: 'Permiso no existe' }` <br>`{ error: 'Permiso Vencido, antes de la creacion del pedido' }` <br>`{ error: 'Obra y Permiso tienen diferente particular vinculado' }` <br>`{ error: 'Obra y Permiso tienen diferente Empresa vinculada' }` <br>**500 Internal Server Error** <br>`{ error: 'Error al modificar el permiso del pedido', detalle: [mensaje de error] }` <br>`{ error: 'Error al modificar el permiso del pedido', detalle: [mensaje de error], stack: [mensaje de stack] }` | Requerido |

| DELETE | /api/pedidos/:pedidoId | Elimina un pedido. | **Path :** `pedidoId` - ID del pedido a eliminar. | 200 OK <br>`{ detalle: 'Pedido cancelado exitosamente' }` | **404 Not Found** <br>`{ error: 'Pedido no encontrado' }` <br>**400 Bad Request** <br>`{ error: 'Error al cancelar el Pedido, tiene movimientos vinculados' }` <br>`{ error: 'Error al cancelar el Pedido, El pedido tiene una factura vinculada' }` <br>`{ error: 'Error al cancelar el Pedido, El pedido fue pagado' }` <br>**500 Internal Server Error** <br>`{ error: 'Error al eliminar el pedido', detalle: [mensaje de error] }` <br>`{ error: 'Error al eliminar el pedido', detalle: [mensaje de error], stack: [mensaje de stack] }` | Requerido |
|----|----|----|----|----|----|----|

## Permisos:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/permisos | Crear un nuevo permiso | Body: `fechaCreacion`, `fechaVencimiento`, `empresaId`, `particularId`, `id` | 201 Created con los detalles del nuevo permiso | 400 Bad Request con errores de validación como fechas inválidas o campos vacíos <br>500 Internal Server Error con detalles del error de creación | Requerido |
| GET | /api/permisos | Obtener permisos del mes actual | \- | 200 OK con la lista de permisos | 500 Internal Server Error con detalles del error de consulta | Requerido |
| GET | /api/permisos/:id | Obtener un permiso específico | Path: `permisoId` <br>Query: `fechaInicio`, `fechaFin` | 200 OK con los detalles del permiso | 400 Bad Request si `fechaFin` es anterior a `fechaInicio` <br>500 Internal Server Error con detalles del error de consulta | Requerido |
| GET | /api/permisos/empresa/:id | Obtener permisos por empresa | Path: `empresaId` <br>Query: `activo` | 200 OK con la lista de permisos | 500 Internal Server Error con detalles del error de consulta | Requerido |
| GET | /api/permisos/particular/:id | Obtener permisos por particular | Path: `particularId` <br>Query: `activo` | 200 OK con la lista de permisos | 500 Internal Server Error con detalles del error de consulta | Requerido |
| PUT | /api/permisos/:id | Actualizar un permiso existente | Path: `permisoId` <br>Body: `fechaCreacion`, `fechaVencimiento`, `empresaId`, `particularId` | 200 OK con los detalles del permiso actualizado | 400 Bad Request si `fechaCreacion` es posterior a `fechaVencimiento` <br>400 Not Found si el permiso o entidad relacionada no existe <br>500 Internal Server Error con detalles del error de actualización | Requerido |
| DELETE | /api/permisos/:id | Eliminar un permiso | Path: `permisoId` | `204 No Content` con mensaje de éxito | 400 Not Found si el permiso no existe <br>500 Internal Server Error con detalles del error de eliminación | Requerido(Admin) |

## Servicios-Camion:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/servicios | Crear un nuevo servicio | Body: `precio`, `camionId`, `tipo`, `fecha`, `descripcion`, `moneda` | 201 Created con los detalles del nuevo servicio | 400 Bad Request por tipo o moneda inválidos, o si el camión no existe <br>500 Internal Server Error con detalles del error de creación | Requerido |
| GET | /api/servicios | Obtener todos los servicios | \- | 200 OK con la lista de servicios | 500 Internal Server Error con detalles del error de consulta | Requerido |
| GET | /api/servicios/:camionid | Obtener servicios por camión | Path: `camionId` | 200 OK con la lista de servicios | 500 Internal Server Error con detalles del error de consulta | Requerido |
| GET | /api/servicios/mensuales | Obtener servicios mensuales | Query: `month`, `year`, `camionId` | 200 OK con la lista de servicios | 400 Bad Request por mes o año inválidos <br>500 Internal Server Error con detalles del error de consulta | Requerido |
| DELETE | /api/servicios/:id | Eliminar un servicio | Path: `servicioId` | 200 OK con mensaje de éxito | 400 Not Found si el servicio no existe <br>500 Internal Server Error con detalles del error de eliminación | Requerido(Admin) |

## Sugerencias:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/sugerencias | Crear una nueva sugerencia | Body: `horarioSugerido`, `choferSugeridoId`, `tipoSugerido`, `pedidoId` | 201 Created con los detalles de la nueva sugerencia | 400 Bad Request si el pedido no existe, tipoSugerido inválido, o sugerencia ya existe <br>500 Internal Server Error con detalles del error de creación | Requerido |
| PUT | /api/sugerencias/:id | Actualizar una sugerencia existente | Path: `sugerenciaId` <br>Body: `horarioSugerido`, `choferSugeridoId` | `202 Accepted` con los detalles de la sugerencia actualizada | 400 Not Found si la sugerencia no existe <br>400 Bad Request si el chofer no es válido <br>500 Internal Server Error con detalles del error de actualización | Requerido |
| DELETE | /api/sugerencias/:id | Eliminar una sugerencia | Path: `sugerenciaId` | 200 OK con mensaje de éxito | 400 Not Found si la sugerencia no existe <br>500 Internal Server Error con detalles del error de eliminación | Requerido(Admin) |
| GET | /api/sugerencias/verificar | Verificar sugerencias para un chofer en un rango de tiempo | Query: `choferId`, `horario` | 200 OK con la lista de sugerencias o mensaje si no hay sugerencias | 400 Bad Request si `choferId` o `horario` faltan <br>500 Internal Server Error con detalles del error de verificación | Requerido |

## Telefono:

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/telefonos | Crear un nuevo teléfono | Body: `telefono`, `tipo`, `extension`, `empleadoId`, `contactoEmpresaId`, `particularId` | 201 Created con los detalles del nuevo teléfono | 400 Bad Request si el teléfono no es numérico, tipo inválido, teléfono o propietario faltan, o longitud incorrecta <br>500 Internal Server Error con detalles del error de creación | Requerido |
| GET | /api/telefonos | Obtener todos los teléfonos | \- | 200 OK con la lista de teléfonos | 500 Internal Server Error con detalles del error al obtener los teléfonos | Requerido |
| GET | /api/telefonos/:id | Obtener un teléfono por ID | Path: `telefonoId` | 200 OK con los detalles del teléfono | 400 Not Found si el teléfono no existe <br>500 Internal Server Error con detalles del error al obtener el teléfono | Requerido |
| PUT | /api/telefonos/:id | Actualizar un teléfono existente | Path: `telefonoId` <br>Body: `telefono`, `tipo` | 200 OK con los detalles del teléfono actualizado | 400 Bad Request si el celular tiene longitud incorrecta <br>400 Not Found si el teléfono no existe <br>500 Internal Server Error con detalles del error de actualización | Requerido |
| DELETE | /api/telefonos/:id | Eliminar un teléfono | Path: `telefonoId` | 200 OK con mensaje de éxito | 400 Not Found si el teléfono no existe <br>500 Internal Server Error con detalles del error de eliminación | Requerido |

## Volquetas

| Método HTTP | Endpoint | Descripción | Parámetros (Body/Query/Path) | Respuesta Exitosa | Respuesta de Error | Token de Login |
|----|----|----|----|----|----|----|
| POST | /api/volquetas | Crea una nueva volqueta. | Body: `numeroVolqueta`, `estado`, `tipo` | 201 Created <br>`{ id, numeroVolqueta, estado, tipo }` | 400 Bad Request <br>`{ error: 'Tipo inválido' }` <br>`{ error: 'Estado inválido' }` <br>`{ error: 'Numero de volqueta es obligatorio' }` <br>500 Internal Server Error <br>`{ error: 'Error al crear la volqueta', detalle: [errors] }` | Requerido |
| GET | /api/volquetas/:id | Obtiene una volqueta por su número, incluyendo movimientos si se especifican fechas. | Path: `numeroVolqueta` <br>Query: `fechaInicio`, `fechaFin` | 200 OK <br>`{ id, numeroVolqueta, estado, tipo, Movimientos }` | 400 Bad Request <br>`{ error: 'FechaFin debe ser despues de fechaInicio' }` <br>400 Not Found <br>`{ error: 'Volqueta no encontrada' }` <br>500 Internal Server Error <br>`{ error: 'Error al obtener movimientos de la volqueta', detalle: [errors] }` | Requerido |
| GET | /api/volquetas | Obtiene todas las volquetas con sus últimos movimientos. | N/A | 200 OK <br>`[ { id, numeroVolqueta, estado, tipo, Movimientos } ]` | 500 Internal Server Error <br>`{ error: 'Error al obtener volquetas con sus últimos movimientos', detalle: [errors] }` | Requerido |
| PUT | /api/volquetas/:id | Actualiza una volqueta por su número. | Path: `numeroVolqueta` <br>Body: `estado`, `tipo` | 200 OK <br>`{ id, numeroVolqueta, estado, tipo }` | 400 Bad Request <br>`{ error: 'Tipo inválido' }` <br>`{ error: 'Estado inválido' }` <br>400 Not Found <br>`{ error: 'Volqueta no encontrada' }` <br>500 Internal Server Error <br>`{ error: 'Error al actualizar la volqueta', detalle: [errors] }` | Requerido |
| DELETE | /api/volquetas/:id | Elimina una volqueta por su número. | Path: `numeroVolqueta` | `204 No Content` <br>`{ detalle: 'Volqueta eliminada' }` | 400 Not Found <br>`{ error: 'Volqueta no encontrada' }` <br>500 Internal Server Error <br>`{ error: 'Error al borrar la volqueta', detalle: [errors] }` | Requerido(Admin) |
| PUT | /api/volquetas-ubicacion/:id | Actualiza la ubicación temporal de una volqueta. | Path: `numeroVolqueta` <br>Body: `ubicacionTemporal` | 200 OK <br>`{ id, numeroVolqueta, estado, tipo, ubicacionTemporal }` | 400 Bad Request <br>`{ error: 'Debe ingresar una ubicacion' }` <br>`{ error: 'Volqueta esta ocupada, no se puede cambiar la ubicacion manualmente' }` <br>400 Not Found <br>`{ error: 'Volqueta no encontrada' }` <br>500 Internal Server Error <br>`{ error: 'Error al actualizar la volqueta', detalle: [errors] }` | Requerido |
| GET | /api/volquetas-48hs | Obtiene los pedidos con volquetas que llevan más de 48 horas en la calle. | Query: `numero` | 200 OK <br>`[ { id, horario, numeroVolqueta, Obras } ]` | 500 Internal Server Error <br>`{ error: 'Error al obtener los pedidos con volquetas con mas de 48hs en la calle', detalle: [errors] }` | Requerido |
